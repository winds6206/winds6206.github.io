{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/google1629c45428e9c281.html","path":"google1629c45428e9c281.html","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/fire.png","path":"images/fire.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schedule.js","path":"js/schedule.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/LICENSE","path":"lib/pace/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/README.md","path":"lib/pace/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flat-top.min.css","path":"lib/pace/pace-theme-flat-top.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-material.min.css","path":"lib/pace/pace-theme-material.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/google1629c45428e9c281.html","hash":"89a43015d373e502e603183c576bc7029317103c","modified":1619430246847},{"_id":"source/_data/post-body-end.njk","hash":"6c5186b77c4f99b5693c2affad4a02fb768d94e2","modified":1618907210080},{"_id":"source/.DS_Store","hash":"f694960ddc8101081dbb9f8a809ecc69ba3dd0a7","modified":1619422244041},{"_id":"source/_data/sidebar.njk","hash":"2be753db9e151a66903d27ff824e3a9cb789cad7","modified":1618897867159},{"_id":"source/_data/styles.styl","hash":"79ca0c069992d74201b1c592dad2292cc06408c6","modified":1618898244835},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1619429936125},{"_id":"source/_posts/PHP-FPM行程優化.md","hash":"b49eea6018bdd7e99c9d401dbbf8657bed985df2","modified":1619688717940},{"_id":"source/_posts/在K8s使用FTP.md","hash":"faeb73b77c58f42121c0c6d53b215283e25f2e58","modified":1619688878569},{"_id":"source/categories/index.md","hash":"689b642708b3a1925e0dce626073095e563fc746","modified":1618904325720},{"_id":"source/about/index.md","hash":"0483c09e1bb413a6bc91e15fd8e3ba9a2d584978","modified":1618904358591},{"_id":"source/tags/index.md","hash":"abf434f92fafa0a5164379705beaf6ad697b995d","modified":1618904367141},{"_id":"source/_posts/在K8s使用FTP/2.png","hash":"da233939eda25aeba01f733922b60106837aebfc","modified":1619422433764},{"_id":"source/_posts/在K8s使用FTP/3.png","hash":"5c99be86c4881c89ff314475b3e77dafed1c6074","modified":1619422486643},{"_id":"source/_posts/在K8s使用FTP/4.png","hash":"fede58c84dbd367be60b554214d534e7c4d20bd9","modified":1619421820345},{"_id":"source/_posts/在K8s使用FTP/1.png","hash":"bdc11e00fd5b72cc5d084d94b243d7f98db514c0","modified":1619422833821},{"_id":"source/_posts/在K8s使用FTP/0.png","hash":"40400075bc99724afd4cb48dadf6b5753f46c3df","modified":1619422290684},{"_id":"themes/next/.DS_Store","hash":"06bbec6c3327341110f6614aedde4bccab437677","modified":1619143478596},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1617221110000},{"_id":"themes/next/.eslintrc.json","hash":"9c0762486f24a8c5e60f8b6c875e4c4728942649","modified":1617221110000},{"_id":"themes/next/.gitattributes","hash":"ec43734985e1cafd53d88ded3020103f7416123c","modified":1617221110000},{"_id":"themes/next/.gitignore","hash":"4600f2b61b2fe0d61f824bda9aa2b5d072f0e635","modified":1617221110000},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1617221110000},{"_id":"themes/next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1617221110000},{"_id":"themes/next/README.md","hash":"de109b73e09826f6bccceae60c618739a794f8f7","modified":1617221110000},{"_id":"themes/next/_config.yml","hash":"d1e1cac2ce2d594f261ce01a8fba161ace42b8dc","modified":1619515910481},{"_id":"themes/next/_vendors.yml","hash":"ba1a58b2ab243f56c9e78e2dd764a8935580ca3a","modified":1617221110000},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1617221110000},{"_id":"themes/next/package.json","hash":"4f5f0137b27ef341f182a3dd9897b332480452c0","modified":1617221110000},{"_id":"themes/next/renovate.json","hash":"cb29cc16e61b0b8a6dac34657d76822ae29ad5aa","modified":1617221110000},{"_id":"themes/next/.githooks/install.js","hash":"4d77dbddf2eac1f3fc78f151d12ed22208ed655b","modified":1617221110000},{"_id":"themes/next/.githooks/pre-commit","hash":"f473eac1aaaa96c947d67988bbed140bbab1a821","modified":1617221110000},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"21cbff565a0445d3a880fff1ee417e309740a9ab","modified":1617221110000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"eefd073dfb68884cd946f7ec6d3b3619031d7650","modified":1617221110000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"3e9fbb78e3dee0ca1dc886d0c28b0148ba0ca499","modified":1617221110000},{"_id":"themes/next/.github/config.yml","hash":"7984e665e9de481a0e0e51fca5668337713f810b","modified":1617221110000},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1617221110000},{"_id":"themes/next/.github/label-commenter-config.yml","hash":"1097fc47beeacfc1edb0248c27b17bf64bde3565","modified":1617221110000},{"_id":"themes/next/.github/labeler.yml","hash":"e7033752b1f7c35adb61c2b38aad0a9202cdd19b","modified":1617221110000},{"_id":"themes/next/.github/release-drafter.yml","hash":"7662e31224a24154c4fe06b95ccbdff51ab8f2cc","modified":1617221110000},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1617221110000},{"_id":"themes/next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1617221110000},{"_id":"themes/next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1617221110000},{"_id":"themes/next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1617221110000},{"_id":"themes/next/languages/ar.yml","hash":"bca66db21c015dbd32970d8708b898518a773e1e","modified":1617221110000},{"_id":"themes/next/languages/de.yml","hash":"4be7b8b76c81bf1853eb36d2e874b17546a0e792","modified":1617221110000},{"_id":"themes/next/languages/default.yml","hash":"814d81c27fed736055ee300e0a6505b26ff4313c","modified":1617221110000},{"_id":"themes/next/languages/en.yml","hash":"814d81c27fed736055ee300e0a6505b26ff4313c","modified":1617221110000},{"_id":"themes/next/languages/es.yml","hash":"651e3b33d86a7cdb9fd7895ca28279f8b1a24faa","modified":1617221110000},{"_id":"themes/next/languages/fa.yml","hash":"6456d40dd42f44101d9d6e7054e9884e9163f948","modified":1617221110000},{"_id":"themes/next/languages/fr.yml","hash":"b15dc05afdc94de02e5d3fee4f8d3dc5594dd37e","modified":1617221110000},{"_id":"themes/next/languages/id.yml","hash":"14e794db4eca36b257994d81eb513e61d1edcbd6","modified":1617221110000},{"_id":"themes/next/languages/it.yml","hash":"c1eeab4992c76bfd436bb205ce58b1cfeef55ee6","modified":1617221110000},{"_id":"themes/next/languages/ja.yml","hash":"d48c4157e0e02e847aac7b513580d3364c81948c","modified":1617221110000},{"_id":"themes/next/languages/ko.yml","hash":"6387357ac2dd498e8b8d630d27050a59180d7e8f","modified":1617221110000},{"_id":"themes/next/languages/nl.yml","hash":"ecb8e39c6225f3c068a5fdd569ee7dafd5c41a1f","modified":1617221110000},{"_id":"themes/next/languages/pt-BR.yml","hash":"a1f27b3a592fc58f17d247f5563ff4a90a3da5f2","modified":1617221110000},{"_id":"themes/next/languages/pt.yml","hash":"63a3e1e728ba5e6e22150de7331bb8a654f34960","modified":1617221110000},{"_id":"themes/next/languages/ru.yml","hash":"e9af1afe529ca747a04b801401d394b2ad696fde","modified":1617221110000},{"_id":"themes/next/languages/si.yml","hash":"2a9861db4547a524b2609c1e7e1061d2e9d48ee4","modified":1617221110000},{"_id":"themes/next/languages/tr.yml","hash":"55b38c7617c24bdc27c9de6cf39f4b191d154fb8","modified":1617221110000},{"_id":"themes/next/languages/uk.yml","hash":"7dd24580c0865c5a7bc4d391855045366a598936","modified":1617221110000},{"_id":"themes/next/languages/vi.yml","hash":"c669c34da544a563ceae3e196addc9df6a78e024","modified":1617221110000},{"_id":"themes/next/languages/zh-CN.yml","hash":"5a3ab21210304efef736e96bad254f789f42c567","modified":1617221110000},{"_id":"themes/next/languages/zh-TW.yml","hash":"b363ee4d02c87d2df1772d64e6d495edaa7e6d6b","modified":1617221110000},{"_id":"themes/next/languages/zh-HK.yml","hash":"59a3649f304ab3cab02cb1cc8c80c91860f53f3a","modified":1617221110000},{"_id":"themes/next/layout/.DS_Store","hash":"53b309f74ee23289177cc754ba4f63ec4b44d98d","modified":1619148056648},{"_id":"themes/next/layout/_layout.njk","hash":"6915e19058b4b4e2b71707cb5ac6c936ef075e89","modified":1617221110000},{"_id":"themes/next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1617221110000},{"_id":"themes/next/layout/category.njk","hash":"0a590e87af50e57b15fc37695c9a3bf4a97c3d92","modified":1617221110000},{"_id":"themes/next/layout/index.njk","hash":"37ec3d1bcd20b8ac1d18e0d68f990450890b46cd","modified":1617221110000},{"_id":"themes/next/layout/page.njk","hash":"9cd3eca2c468bb46c7c5bf391bea4b025af178f6","modified":1617221110000},{"_id":"themes/next/layout/post.njk","hash":"6abeb85fb3e4c382ed4bb6049b12a807e6226e67","modified":1617221110000},{"_id":"themes/next/layout/tag.njk","hash":"6cd707f846bfd6becbcfb060c26958bb4015c31f","modified":1617221110000},{"_id":"themes/next/source/.DS_Store","hash":"039017a5413bfe49dd38614798ab5051dc60058b","modified":1619143529611},{"_id":"themes/next/test/.DS_Store","hash":"f0d0ee35a372877b2e384933e08ae1c23e88f1f2","modified":1618909918042},{"_id":"themes/next/test/index.js","hash":"6bf0289846538be3e9a63809af98f00e1fbdd90b","modified":1617221110000},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"fc4dce84ed9a5d21d3a8833ff6d776c46f876115","modified":1617221110000},{"_id":"themes/next/.github/ISSUE_TEMPLATE/config.yml","hash":"c40ae7903b6cc99f94c9d45ac7ba8c2850bb1309","modified":1617221110000},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"4ecac91716eac59d7c2bc53cf6e95612d44da97b","modified":1617221110000},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"8cc5b5c116f6a052865a324512362f145d699202","modified":1617221110000},{"_id":"themes/next/.github/workflows/label-commenter.yml","hash":"44405477660289d4ed9beba1d054b15bb67bba06","modified":1617221110000},{"_id":"themes/next/.github/workflows/labeler.yml","hash":"8b73c439dc796be141d521a4546bcfb7a5485534","modified":1617221110000},{"_id":"themes/next/.github/workflows/linter.yml","hash":"a3019edd2185c4c287a682fdd76043e107ed927b","modified":1617221110000},{"_id":"themes/next/.github/workflows/lock.yml","hash":"70bd0be3f33774e4b0ada3a59c901f8f9cff1013","modified":1617221110000},{"_id":"themes/next/.github/workflows/release-drafter.yml","hash":"4f3af81009cb922be91f718a67425377515ea69d","modified":1617221110000},{"_id":"themes/next/.github/workflows/tester.yml","hash":"22aaaa3eba1a7ebcf0f78417fd9a7113ee7b6c6c","modified":1617221110000},{"_id":"themes/next/.github/workflows/stale.yml","hash":"e1d9cc9addc35cfb53f971f14d9d04065c941df0","modified":1617221110000},{"_id":"themes/next/docs/ru/README.md","hash":"63df0665005063108e1bc19df3cf8c4e46facb95","modified":1617221110000},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7a06d443f374bd1e84294067a0ac796afd9fbe60","modified":1617221110000},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"8ee5ca39ac4a372a5c0f16e344bbe578af4aeae4","modified":1617221110000},{"_id":"themes/next/docs/zh-CN/README.md","hash":"9abd8473985f2bf1557b1aac31b436c92d5450a7","modified":1617221110000},{"_id":"themes/next/layout/_macro/post-collapse.njk","hash":"1a30d751871dabfa80940042ddb1f77d07d830b9","modified":1617221110000},{"_id":"themes/next/layout/_macro/post.njk","hash":"b92d6c77d4b349c5d56fb8e0a44b578c194ef466","modified":1619143894651},{"_id":"themes/next/layout/_macro/sidebar.njk","hash":"eb786e8b35e354287cda345c524cd35ec955f692","modified":1618892981343},{"_id":"themes/next/layout/_partials/comments.njk","hash":"334e8d8117a46c8c097788811322a62627952219","modified":1617221110000},{"_id":"themes/next/layout/_partials/footer.njk","hash":"d16fdaf94d66efc0242b0c26ed539017e3b4f795","modified":1617221110000},{"_id":"themes/next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1617221110000},{"_id":"themes/next/layout/_partials/pagination.njk","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1617221110000},{"_id":"themes/next/layout/_partials/widgets.njk","hash":"852a750524decf1efa587cd52b09e387ed8315de","modified":1617221110000},{"_id":"themes/next/layout/_third-party/.DS_Store","hash":"6065ff4e4140fdea52256e42f68465d571ddd808","modified":1618822861217},{"_id":"themes/next/layout/_third-party/index.njk","hash":"467b45a4912369bcba77908151e76a3f3ad0fed2","modified":1617221110000},{"_id":"themes/next/layout/_third-party/nprogress.njk","hash":"271139c3896a6d294f46f767cb21b2e848050841","modified":1617221110000},{"_id":"themes/next/layout/_third-party/quicklink.njk","hash":"294b7f6a4fa566e369d8be0ce7b28f35b6c14563","modified":1617221110000},{"_id":"themes/next/layout/_third-party/rating.njk","hash":"2731e262a6b88eaee2a3ca61e6a3583a7f594702","modified":1617221110000},{"_id":"themes/next/layout/_scripts/index.njk","hash":"6f0433940680c0f9db37542ca36f76e4bb1c1d50","modified":1617221110000},{"_id":"themes/next/layout/_scripts/noscript.njk","hash":"4f250d0bf80be06dd2c95c1d4c2ba2624b59cf2a","modified":1617221110000},{"_id":"themes/next/layout/_scripts/pjax.njk","hash":"28a3bcb1ce50924a5a48b0f3756ac3a8736867f1","modified":1617221110000},{"_id":"themes/next/layout/_scripts/vendors.njk","hash":"bada07da2a47ed6de6081796367b19dd9e906cfb","modified":1617221110000},{"_id":"themes/next/scripts/events/index.js","hash":"89091bc943cd8b8c63b8af3d26fb0a027048e9ba","modified":1617221110000},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1617221110000},{"_id":"themes/next/scripts/filters/locals.js","hash":"374c9211b3b6a5b2ad31f1bea69a22f2727f633a","modified":1617221110000},{"_id":"themes/next/scripts/filters/minify.js","hash":"be0574c64a38210e449c99d38a760452015060a3","modified":1617221110000},{"_id":"themes/next/scripts/filters/post.js","hash":"42a9b81c5449afa9d67770604478168333c93804","modified":1617221110000},{"_id":"themes/next/scripts/helpers/engine.js","hash":"0208f17281a1afe3da1298dd52350eb838098349","modified":1617221110000},{"_id":"themes/next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1617221110000},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"413c51fa3caa87fe95d1d8f95e6023f096515632","modified":1617221110000},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"577c510374cf9bcfa8d3a1027e42411a9324805e","modified":1617221110000},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"afdd6a188a74c188f0dd154fac70efd4080ca262","modified":1617221110000},{"_id":"themes/next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1617221110000},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1617221110000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1617221110000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"79102d9e9bccff6224e77a77c4d2d363094ae3df","modified":1617221110000},{"_id":"themes/next/scripts/tags/index.js","hash":"17f9451ce1f10f78437f52218757d38d4e1591b0","modified":1617221110000},{"_id":"themes/next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1617221110000},{"_id":"themes/next/scripts/tags/link-grid.js","hash":"9e2c58d1a4d1dd84fa86144e5b4576b2fd10a37f","modified":1617221110000},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"4fb01ca650fa8b256b8d48f50dc1b18350bd3d6d","modified":1617221110000},{"_id":"themes/next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1617221110000},{"_id":"themes/next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1617221110000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"2bf00d56b3b289a7dd27e9b5820430a2457a19f3","modified":1617221110000},{"_id":"themes/next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1617221110000},{"_id":"themes/next/source/css/_colors.styl","hash":"b37f9847d2f95632e911df670b51921a7d748068","modified":1617221110000},{"_id":"themes/next/source/css/_mixins.styl","hash":"8b0c0353d360b984d285860697b2ccbec78da462","modified":1617221110000},{"_id":"themes/next/source/css/main.styl","hash":"78ce791cc4ac95386cf6839ca72f5f7b51f86ee9","modified":1617221110000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1617221110000},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1617221110000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1617221110000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1617221110000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1617221110000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1617221110000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1617221110000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1617221110000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1617221110000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1617221110000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1617221110000},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1617221110000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1617221110000},{"_id":"themes/next/source/js/.DS_Store","hash":"a26f34f63e28d8942861b93cbaa5276545492ddf","modified":1618909932105},{"_id":"themes/next/source/js/algolia-search.js","hash":"a360423984cdd915d04365c51bcab440e52d7223","modified":1617221110000},{"_id":"themes/next/source/js/bookmark.js","hash":"e45e1fbb7c6d645e9c410759486216e570d02bef","modified":1617221110000},{"_id":"themes/next/source/js/local-search.js","hash":"da2051e7cab184ae4aa64457c5db7476b4645fdc","modified":1617221110000},{"_id":"themes/next/source/js/motion.js","hash":"6d4bd07a6f8e1b4083119dca0acb5b289533b619","modified":1617221110000},{"_id":"themes/next/source/js/next-boot.js","hash":"873e52a851a6ce8dc61b870fa7083da4d2304b7b","modified":1617221110000},{"_id":"themes/next/source/js/schedule.js","hash":"71d62fc3584c47ff2d4cc945226e412264399be9","modified":1617221110000},{"_id":"themes/next/source/js/utils.js","hash":"42ef4f2c0c61aac8fbddd9534f5f86d83dc09c43","modified":1617221110000},{"_id":"themes/next/test/helpers/font.js","hash":"342ef3c6fd2dcca2a8802a516ed6d7f389fd2ca2","modified":1617221110000},{"_id":"themes/next/test/helpers/index.js","hash":"63ba28afed697f7b3574436b1133b8ecc9c0c357","modified":1617221110000},{"_id":"themes/next/test/helpers/next-url.js","hash":"abc4ee5149df6172b2c36b6e85d1993ec748ddea","modified":1617221110000},{"_id":"themes/next/test/tags/button.js","hash":"48f2aa4c513e9e24bd6a811410520b74cd7ea88b","modified":1617221110000},{"_id":"themes/next/test/tags/caniuse.js","hash":"aa5e728445caeaf7c2ccd0f3fcb2cad0c93ca6d1","modified":1617221110000},{"_id":"themes/next/test/tags/center-quote.js","hash":"7667342fd1a1417eaf6a254012b84ae40e8d13dd","modified":1617221110000},{"_id":"themes/next/test/tags/group-pictures.js","hash":"f41640e5d0f552c0b0c4ac8876a2edb0fcf54e56","modified":1617221110000},{"_id":"themes/next/test/tags/index.js","hash":"e8779e54f0979b221858f8bb74dd081bb503b910","modified":1617221110000},{"_id":"themes/next/test/tags/label.js","hash":"4ebf3698c258ca978b997acbdd0dece44069c09d","modified":1617221110000},{"_id":"themes/next/test/tags/link-grid.js","hash":"88ec69e4dc1d493d21254ed9296a2514e91f0f8b","modified":1617221110000},{"_id":"themes/next/test/tags/mermaid.js","hash":"ab77be5f3c6d9a57c7b9dda6decf1906a736fef9","modified":1617221110000},{"_id":"themes/next/test/tags/note.js","hash":"3dcfcd65bf9f326972ea7571fdb1444200f5d07e","modified":1617221110000},{"_id":"themes/next/test/tags/pdf.js","hash":"fd6ea5123560a90f7e7c1eface23dbe1455db25f","modified":1617221110000},{"_id":"themes/next/test/tags/tabs.js","hash":"d63722919f9da2e44d6b952801e10a2915ea9c12","modified":1617221110000},{"_id":"themes/next/test/tags/video.js","hash":"b796fc4dceb20a30e730c322bb5474c0162464cc","modified":1617221110000},{"_id":"themes/next/test/validate/index.js","hash":"5a95ccc8598667535bd022e988055c0e019f3670","modified":1617221110000},{"_id":"themes/next/layout/_partials/head/head-unique.njk","hash":"37bdf020591feb0cf72327c9efd755bf78a0afd6","modified":1617221110000},{"_id":"themes/next/layout/_partials/head/head.njk","hash":"8f6521714044676e15d924da387b2aef45fc8fe6","modified":1617221110000},{"_id":"themes/next/layout/_partials/header/brand.njk","hash":"ffb6c69a9c90793cbe9bf0544b55f7a41c016d8f","modified":1617221110000},{"_id":"themes/next/layout/_partials/header/index.njk","hash":"53895b3af95667edc5bf5d7356f8a2b4fe091447","modified":1617221110000},{"_id":"themes/next/layout/_partials/header/menu-item.njk","hash":"b46f412c0b4f775fd329d50357f722f5d7c1a3ba","modified":1617221110000},{"_id":"themes/next/layout/_partials/header/menu.njk","hash":"c9390824b57f23b7c8a5c23a9834514123673766","modified":1617221110000},{"_id":"themes/next/layout/_partials/header/sub-menu.njk","hash":"75a158a5b54a3a76ee6590f5e0e2dd4a9f0be869","modified":1617221110000},{"_id":"themes/next/layout/_partials/page/breadcrumb.njk","hash":"edb3bb6d644b7407673c5ef3a426a244e98fcf89","modified":1617221110000},{"_id":"themes/next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1617221110000},{"_id":"themes/next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1617221110000},{"_id":"themes/next/layout/_partials/page/schedule.njk","hash":"9d650333160ad1977fe42d9770869ff1660a95fe","modified":1617221110000},{"_id":"themes/next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-copyright.njk","hash":"133942922e34abae9e4de7ea5591d77c0caa4b37","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-followme.njk","hash":"154df0bb323c332d8c25343f258ee865e5553423","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-footer.njk","hash":"8f14f3f8a1b2998d5114cc56b680fb5c419a6b07","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-meta.njk","hash":"1410fad73e0a08a45166e4a055ba150fd06e8636","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-related.njk","hash":"f79c44692451db26efce704813f7a8872b7e63a0","modified":1617221110000},{"_id":"themes/next/layout/_partials/post/post-reward.njk","hash":"a9bb52d0537d27cfe670d80e716da6780786ab8a","modified":1617221110000},{"_id":"themes/next/layout/_partials/search/algolia-search.njk","hash":"efb2b6f19df02ba5ae623a1f274fff52aed21e6f","modified":1617221110000},{"_id":"themes/next/layout/_partials/search/index.njk","hash":"8f6f256ab3b351ffc80f1f3f1d9834e9a7cfac31","modified":1617221110000},{"_id":"themes/next/layout/_partials/search/localsearch.njk","hash":"661f7acae43f0be694266323320f977d84119abe","modified":1617221110000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.njk","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1617221110000},{"_id":"themes/next/layout/_partials/sidebar/site-overview.njk","hash":"c419158e19805e2db614a5f5651e3e534e4a5e4e","modified":1617221110000},{"_id":"themes/next/layout/_third-party/analytics/cloudflare.njk","hash":"c978e9efd472c4825f93b83524b11f1c4f7efaab","modified":1617221110000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.njk","hash":"ad197fd728dd7ac90f910fdf80ce848eab3ff187","modified":1617221110000},{"_id":"themes/next/layout/_third-party/analytics/growingio.njk","hash":"5adea065641e8c55994dd2328ddae53215604928","modified":1617221110000},{"_id":"themes/next/layout/_third-party/analytics/index.njk","hash":"2d36a481a70d5f450f1f166dc556ac1218b18537","modified":1617221110000},{"_id":"themes/next/layout/_third-party/chat/chatra.njk","hash":"f910618292c63871ca2e6c6e66c491f344fa7b1f","modified":1617221110000},{"_id":"themes/next/layout/_third-party/chat/tidio.njk","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/changyan.njk","hash":"5c2cd9b6f02bcb6248d3f18638a58e329fe8c0d1","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/disqus.njk","hash":"cc1450d62d76e59968bdd25836694b8339207384","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/disqusjs.njk","hash":"54eab4840443262432ec7c47e56e9859ace2a902","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/gitalk.njk","hash":"089e05126e7e4033eff90a26f946c419f2a1e87a","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/isso.njk","hash":"c1bf0753fc4bc5f21d61eaffbcc915a462c7d830","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/livere.njk","hash":"6252b0353c6a36d03c68ebec1073293442221bd1","modified":1617221110000},{"_id":"themes/next/layout/_third-party/comments/utterances.njk","hash":"7a07bbfb09ddf70b919f0ebe1b00942c96152389","modified":1617221110000},{"_id":"themes/next/layout/_third-party/math/index.njk","hash":"47a982aec8830c2f9711b2aff59ff83f09deb09e","modified":1617221110000},{"_id":"themes/next/layout/_third-party/math/katex.njk","hash":"b6746dfad32cc8a46ff8f4194a7a16ca41744803","modified":1617221110000},{"_id":"themes/next/layout/_third-party/math/mathjax.njk","hash":"f4fd63b9f9230dadd1190f79d59313751925ed90","modified":1617221110000},{"_id":"themes/next/layout/_third-party/search/algolia-search.njk","hash":"97035261aa85c7d39c6ce1211cdefc6248c0446d","modified":1617221110000},{"_id":"themes/next/layout/_third-party/search/localsearch.njk","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1617221110000},{"_id":"themes/next/layout/_third-party/statistics/firestore.njk","hash":"0ff61346dc1327054ea2c211ba6fb654cdcdfd8d","modified":1617221110000},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1617221110000},{"_id":"themes/next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1617221110000},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.njk","hash":"811a3ad58c0a15550100bdc199bef8add1ad526c","modified":1617221110000},{"_id":"themes/next/layout/_third-party/tags/mermaid.njk","hash":"0222d958b98afcf5949522e20fd15f8ca4de20e6","modified":1617221110000},{"_id":"themes/next/layout/_third-party/tags/pdf.njk","hash":"b6241ebbb091ef18b3d06cba08ac2e04e3f67a7d","modified":1617221110000},{"_id":"themes/next/scripts/events/lib/config.js","hash":"09b58494e9d9d25542d1d218f2d0ffc4d2da9f30","modified":1617221110000},{"_id":"themes/next/scripts/events/lib/highlight.js","hash":"6aec7b2c38c50989a23bfaa0d560e75c7f553e12","modified":1617221110000},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"7b0ea8d28ced63977dc6539920eb044b1098adcb","modified":1617221110000},{"_id":"themes/next/scripts/events/lib/vendors.js","hash":"d1ecc44f9f6e236bf910e36150767d36be4658b2","modified":1617221110000},{"_id":"themes/next/scripts/events/lib/utils.js","hash":"b281be775b693f9bf32766c8f6ef703c72ac9b00","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"ecc93ba67af26b6715fc75001fa0c3131b726241","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"2486f3e0150c753e5f3af1a3665d074704b8ee2c","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"cc1e2d5921c6990f94f3cf11b1ff7533a21da9b7","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"32a1d9ad50621a78d0243e176c8b05ff7866fd5b","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"7c0533bac4400689a0d5ab3a188ce42b9375de46","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"60be56c9ba590e5bcb80d1607ca7eeedde9fdfaa","modified":1617221110000},{"_id":"themes/next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1617221110000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e1fbf169b9b6a194b518240cbd06ec3c48b83d61","modified":1617221110000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1617221110000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"e3be898f5ebcf435a26542653a9297ff2c71aeb0","modified":1617221110000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c65536a128b9bc9dbe2fbb1b235a3cded2891002","modified":1617221110000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"32a1b73944561655087d80f025208a84e012b3cf","modified":1617221110000},{"_id":"themes/next/source/js/schemes/muse.js","hash":"9d15d0d6a58b1df74827288f117af22b4b6aafe5","modified":1617221110000},{"_id":"themes/next/source/lib/pace/LICENSE","hash":"b29db4c99aa5b8d574026f68804051ff4b75466e","modified":1619145463272},{"_id":"themes/next/source/lib/pace/README.md","hash":"168f57bb63563b9671d0c4f10c0940e7eec261f0","modified":1619145463272},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1619145463272},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1619145463272},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1619145463273},{"_id":"themes/next/source/lib/pace/pace-theme-flat-top.min.css","hash":"5e1c97e232b46e48592a8e4983ae5a89e0a7da6a","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace-theme-material.min.css","hash":"f1ff83985c090f3a3236554c5ef69542dcceb049","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1619145463274},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1619145463275},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"d4809783ded05625675b1b4bbd9e99d7f5f7d7f9","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ece860218125bdb2578f373ed4f5040c9670e4b1","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/index.styl","hash":"3c7ae405dd30b9b46494a6b9a6cb1b7ec6138ba9","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"1cffb9c24eea18090b21b9cb908fe07cfeac0c03","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/index.styl","hash":"0c9f72ad98807521cbdcee7b5bbe2e884311db39","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"9f88d350df8115d26c6adbc2025a27ef9a42d7ff","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"db5ddaa8fd2101b0fd7108ce4bbcb9f0649fa223","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"41cba8c4c5637a6b8f1b62e67673b33676f5d734","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"572a41499391677d84b16d8dbd6a996a3d5ce041","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"fd49b521d67eaccc629f77b4e095cb7310327565","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"4817e77577896ab5c0da434549917ee703a3f4cf","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"5604ac1e161099a4d3e5657d53507268866dc717","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"357b899ac0f0dfbbbebf1ea972030c7cefa463ce","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"b332868d76d9f1651efd65abfc0d3c9d699b1a45","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"06080fd963c904d96c00eff098a284e337953013","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"82a29572dd90451f75358a2ee2522b87304a0bb8","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"8a70d51d8f7cd113e5fbc9f0e70c46a072f282c8","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"87e163de866938c668ec33e6ff8972b7a968e0af","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"6eee86c8f0175d6c09e434053516cd8556f78d44","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"be5c46b983df08b9dbac1b4749b1a101b54b6b50","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"72dc825c50357402c342d62ab60fc0c478ab6bc1","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"2d337a12c5c668ee64447bda5a9ed64eaed5b29e","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1617221110000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1617221110000},{"_id":"themes/next/source/lib/pace/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1619145463270},{"_id":"themes/next/source/lib/pace/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1619145462303},{"_id":"themes/next/source/lib/pace/.git/config","hash":"46d590e05dc25560a69d5cc71b337adad9654443","modified":1619145463271},{"_id":"themes/next/source/lib/pace/.git/packed-refs","hash":"7728d474cdaa7943851d42c42eaa718b8afbab97","modified":1619145463269},{"_id":"themes/next/source/lib/pace/.git/index","hash":"a8c195387712c4837c34b1dda0c0d2afb38542cf","modified":1619424038836},{"_id":"themes/next/source/lib/pace/.github/stale.yml","hash":"fd0856f6745db8bd0228079ccb92a662830cc4fb","modified":1619145463272},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"b6e2eb1550a7845cb2adf86081a4ab6c7bde1e68","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/index.styl","hash":"b3fa752f72ca1413289b76c56fbd33a00e3d25d7","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-body.styl","hash":"5d61dedb3bec1021d52894f9b379e4d0953f6a35","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"76d0dfb3a8b873a6180604ac6daecf38b6a963a2","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"ec37a36e94ba791663607a5022f763915778578f","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-footer.styl","hash":"1d284f3ea03ba9b4feb76b375e539a8e0bccf1c3","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"967021e5483495bdefac9e0b3e1c84c366c657fd","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"5b5649b9749e3fd8b63aef22ceeece0a6e1df605","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"b1181c5f12a70b8bf710586fcb0d7959841ee512","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"7102f8e819b62cf7d121fd063dc663fd068feaa6","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/index.styl","hash":"b457756758f0632767e8a560e3033059cbe4a67b","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"83c6588c51cd418336f4945813410a100ddfe2a4","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"2c534d2b2dbc932ad65d335a720a7ba9612bac04","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"2896840ab8ac8ab2a7f76d18df893f290ac31625","modified":1617221110000},{"_id":"themes/next/source/css/_common/components/third-party/utterances.styl","hash":"bf88d9c585d7b00463c46352402cfea415c29493","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/footer/index.styl","hash":"f11dca93e334b68a29e792f7abe682993fab7568","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"d6d60f02b5e9f89dbfce180b3884030898022664","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"cf194bea1c9e67fde871a04de3bc81df72c54277","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"392fd53a8dd4e3f33a853ebb24290a622300e0ff","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"9a47c9045e443b8d20932f9c564a3a05fa4c6b51","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/index.styl","hash":"d180871d4440090241fc988736c1f3a7efb4b1ba","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"52fc98b1435129eb3edb9293ced9e507741f1350","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"9950c3188a28e1c63b5498b7bdcd14b12ace3e28","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"ab715dbf2b98bfeb5e7b7c43e92e5c02496cc2ea","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"fbdb63c6a8887d19b7137325ba7d6806f728139c","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"f7ff85fe6c4efb8ff036fab2c3277b7d8bed69a8","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"6394340c28a21f6aa90e786f3bfe24fb26595653","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"432e73bc4f99322af6af1852e0ea6e674919c31a","modified":1617221110000},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"69eb1c282a8fd5dbab606cc09c34c5dc8e44e753","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"83ee4993710fc8daa1c8dbfccd5d5091fd244c30","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/index.styl","hash":"08e79881d58d01afab6dbed37ab4f52356564d7e","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/index.styl","hash":"cef4e779473daa3761709958243c6b8a57bbd814","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"15a5e273a8137550c93c8d2a60f9fcf86e04a89e","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"79ffcf92771cd48f4a686f9d8d7d610f39e9fc1f","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"3c029a003e9bf747e1b9cc7c0c127f6028374876","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"f53e6c12bd4805888f696386d00668f23cd335e7","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b49c64f8e9a6ca1c45c0ba98febf1974fdd03616","modified":1617221110000},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"50b00218e854200c4ec0573a841e226d49c45cba","modified":1617221110000},{"_id":"themes/next/source/lib/pace/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1619145462305},{"_id":"themes/next/source/lib/pace/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1619145462304},{"_id":"themes/next/source/lib/pace/.git/hooks/fsmonitor-watchman.sample","hash":"118ff5509f187039734d04456bf01e44c933ac19","modified":1619145462305},{"_id":"themes/next/source/lib/pace/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1619145462306},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1619145462307},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-commit.sample","hash":"a79d057388ee2c2fe6561d7697f1f5efcff96f23","modified":1619145462304},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-merge-commit.sample","hash":"04c64e58bc25c149482ed45dbd79e40effb89eb7","modified":1619145462306},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1619145462304},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1619145462305},{"_id":"themes/next/source/lib/pace/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1619145462305},{"_id":"themes/next/source/lib/pace/.git/hooks/pre-push.sample","hash":"a599b773b930ca83dbc3a5c7c13059ac4a6eaedc","modified":1619145462307},{"_id":"themes/next/source/lib/pace/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1619145462303},{"_id":"themes/next/source/lib/pace/.git/hooks/update.sample","hash":"730e6bd5225478bab6147b7a62a6e2ae21d40507","modified":1619145462307},{"_id":"themes/next/source/lib/pace/.git/logs/HEAD","hash":"035b09d8caf5e21ab0dbae9a819eddb18c27b6a9","modified":1619145463270},{"_id":"themes/next/source/css/_common/outline/header/index.styl","hash":"f1778d2c56974b96dae429456d5c55be325c4946","modified":1617221110000},{"_id":"themes/next/source/lib/pace/.git/objects/pack/pack-a216b3a30ac40cd759f5986da014d2e403d1e7ba.idx","hash":"9d38ccbcc91ea9aa27a81c3e387044a01b2341fe","modified":1619145463259},{"_id":"themes/next/source/lib/pace/.git/objects/pack/pack-a216b3a30ac40cd759f5986da014d2e403d1e7ba.pack","hash":"18445e371c7ea0fa1976e4c5d8da6685cce0c1c9","modified":1619145463258},{"_id":"themes/next/source/lib/pace/.git/refs/heads/master","hash":"22684435265b2bb504024b34b80ffbd6786a2411","modified":1619145463270},{"_id":"themes/next/source/lib/pace/.git/logs/refs/heads/master","hash":"035b09d8caf5e21ab0dbae9a819eddb18c27b6a9","modified":1619145463271},{"_id":"themes/next/source/lib/pace/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1619145463270},{"_id":"themes/next/source/lib/pace/.git/logs/refs/remotes/origin/HEAD","hash":"035b09d8caf5e21ab0dbae9a819eddb18c27b6a9","modified":1619145463269},{"_id":"themes/next/source/images/fire.png","hash":"4d90ee49a3d4191fe21553a8ebf28c231ae037f5","modified":1602659462896},{"_id":"public/search.xml","hash":"19ec9191a61ade8bf7fd8e5d7cf7291483eb07a9","modified":1619800156420},{"_id":"public/sitemap.xml","hash":"e5bc4e9a744d5b5b6e54e808e2936edcae51cd42","modified":1619800156420},{"_id":"public/categories/index.html","hash":"82b0987dbeb0da7aaa2d66c3d90577cbf1bd47dc","modified":1619800156420},{"_id":"public/about/index.html","hash":"df134d7a9858bfcfefc820a5444f90b51a0819ee","modified":1619800156420},{"_id":"public/tags/index.html","hash":"28f94e6dfbef57b3ec6092beebc82e9706f23593","modified":1619800156420},{"_id":"public/archives/index.html","hash":"71d61bf85e081f8485a575d519cf0bd9532eaa1e","modified":1619800156420},{"_id":"public/archives/2021/index.html","hash":"a01f474d2522d389fb27f7e8ddba689c738d24f4","modified":1619800156420},{"_id":"public/archives/2021/04/index.html","hash":"44c018c18f18c6fa7735a63a89fcdecd93a0d804","modified":1619800156420},{"_id":"public/tags/PHP-FPM/index.html","hash":"7a993f9e0fc2bccc1b5ec500c464234507cc800e","modified":1619800156420},{"_id":"public/tags/GKE/index.html","hash":"6075bc0b9daef1158706a18d9d07d3206756884d","modified":1619800156420},{"_id":"public/tags/GCP/index.html","hash":"850e6ac95c3b7c3b2643f487f03253a61e7ff43a","modified":1619800156420},{"_id":"public/tags/K8s/index.html","hash":"c65606b20c18fd5201f238d29c66fc1b5fe03297","modified":1619800156420},{"_id":"public/tags/kubernetes/index.html","hash":"7348557bfa27f1b5d3516624eb7bd8f29323d5af","modified":1619800156420},{"_id":"public/tags/ftp/index.html","hash":"349f41843cede35773030bd0f84921b22f719403","modified":1619800156420},{"_id":"public/2021/04/29/PHP-FPM行程優化/index.html","hash":"e42044eca478750d90777fe49ce1871f0d0a3492","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/index.html","hash":"b31522a3bd185e68d9854052af9135def5a33896","modified":1619800156420},{"_id":"public/index.html","hash":"cec17f31e86d04015e993a57fe3361e4b700a7e5","modified":1619800156420},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1619800156420},{"_id":"public/google1629c45428e9c281.html","hash":"89a43015d373e502e603183c576bc7029317103c","modified":1619800156420},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1619800156420},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1619800156420},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1619800156420},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1619800156420},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1619800156420},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1619800156420},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1619800156420},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1619800156420},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1619800156420},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1619800156420},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1619800156420},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1619800156420},{"_id":"public/lib/pace/LICENSE","hash":"b29db4c99aa5b8d574026f68804051ff4b75466e","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/2.png","hash":"da233939eda25aeba01f733922b60106837aebfc","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/3.png","hash":"5c99be86c4881c89ff314475b3e77dafed1c6074","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/4.png","hash":"fede58c84dbd367be60b554214d534e7c4d20bd9","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/1.png","hash":"bdc11e00fd5b72cc5d084d94b243d7f98db514c0","modified":1619800156420},{"_id":"public/js/algolia-search.js","hash":"a360423984cdd915d04365c51bcab440e52d7223","modified":1619800156420},{"_id":"public/js/local-search.js","hash":"da2051e7cab184ae4aa64457c5db7476b4645fdc","modified":1619800156420},{"_id":"public/js/bookmark.js","hash":"e45e1fbb7c6d645e9c410759486216e570d02bef","modified":1619800156420},{"_id":"public/js/motion.js","hash":"6d4bd07a6f8e1b4083119dca0acb5b289533b619","modified":1619800156420},{"_id":"public/js/next-boot.js","hash":"873e52a851a6ce8dc61b870fa7083da4d2304b7b","modified":1619800156420},{"_id":"public/js/schedule.js","hash":"71d62fc3584c47ff2d4cc945226e412264399be9","modified":1619800156420},{"_id":"public/js/utils.js","hash":"42ef4f2c0c61aac8fbddd9534f5f86d83dc09c43","modified":1619800156420},{"_id":"public/js/schemes/muse.js","hash":"9d15d0d6a58b1df74827288f117af22b4b6aafe5","modified":1619800156420},{"_id":"public/lib/pace/README.html","hash":"b1db0e6c71c25fbdc5a161e1bd70382846ce99ab","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-flat-top.min.css","hash":"5e1c97e232b46e48592a8e4983ae5a89e0a7da6a","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1619800156420},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1619800156420},{"_id":"public/css/main.css","hash":"54e93dc9a3beaf78eeccf9c51f2c7e16b8255c24","modified":1619800156420},{"_id":"public/lib/pace/pace-theme-material.min.css","hash":"f1ff83985c090f3a3236554c5ef69542dcceb049","modified":1619800156420},{"_id":"public/images/fire.png","hash":"4d90ee49a3d4191fe21553a8ebf28c231ae037f5","modified":1619800156420},{"_id":"public/2021/04/26/在K8s使用FTP/0.png","hash":"40400075bc99724afd4cb48dadf6b5753f46c3df","modified":1619800156420}],"Category":[],"Data":[{"_id":"post-body-end","data":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n"},{"_id":"sidebar","data":"\n"},{"_id":"styles","data":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}],"Page":[{"title":"categories","date":"2021-04-20T07:37:41.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2021-04-20 15:37:41\ntype: \"categories\"\n---\n","updated":"2021-04-20T07:38:45.720Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cko4j6stt00006w1e87z1ggif","content":"","site":{"data":{"post-body-end":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n","sidebar":"\n","styles":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}},"excerpt":"","more":""},{"title":"about","date":"2021-04-20T07:37:30.000Z","type":"about","_content":"","source":"about/index.md","raw":"---\ntitle: about\ndate: 2021-04-20 15:37:30\ntype: \"about\"\n---\n","updated":"2021-04-20T07:39:18.591Z","path":"about/index.html","comments":1,"layout":"page","_id":"cko4j6stz00026w1eaou307qb","content":"","site":{"data":{"post-body-end":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n","sidebar":"\n","styles":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}},"excerpt":"","more":""},{"title":"tags","date":"2021-04-20T07:37:19.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2021-04-20 15:37:19\ntype: \"tags\"\n---\n","updated":"2021-04-20T07:39:27.141Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cko4j6su200056w1e6qk9g7zf","content":"","site":{"data":{"post-body-end":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n","sidebar":"\n","styles":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}},"excerpt":"","more":""}],"Post":[{"title":"PHP-FPM行程優化","date":"2021-04-29T09:21:21.000Z","_content":"\n## 前言\n\n近期公司內部 PHP-FPM 有頂到一些行程相關的上限，導致網頁要處理後端程式時無法處理，進而造成服務異常。 而這樣子的問題不外乎可以從 LOG 去看到一些觸發到這個問題的根本原因是什麼。\n\n以下列了兩個行程不夠時常見的 Error Log\n\n```\nWARNING: [pool www] server reached pm.max_children setting (5), consider raising it\n```\n\n```\nWARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 32 children, there are 0 idle, and 19 total child\n```\n\n<!--more-->\n\nPHP-FPM 行程優化相關參數，以下為預設值，需要依照每台機器狀態不同去調教\n\n```\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\n\npm.max_requests = 500\npm.process_idle_timeout = 10s # 需搭配 pm = ondemand\n```\n\n以下會針對每個項目去解釋其用途\n\n## pm (Process Manager)\n\npm 為行程管理(Process Manager) 的縮寫，此參數主要是在設定 pm 要使用哪種模式來管理行程，可以區分兩大類型，共三種模式可以選擇，預設是使用 dynamic\n\n### 固定行程數量\n- static: 設定此模式，只有 `pm.max_children` 參數會生效，行程數量則根據 `pm.max_children`，效能較好，因為 child process 會保持一個固定的數量，但是比較佔記憶體，因為即便請求較少量時，依然會佔用，所以較不建議使用此模式\n\n### 動態行程數量\n\n皆根據 `pm.max_children`、`pm.start_servers`、`pm.min_spare_servers`、`pm.max_spare_servers` 動態調整\n\n- dynamic: 根據使用量用多寡開行程，但當使用量比較低時，會保留固定行程(根據 `pm.min_spare_servers` 或 `pm.max_spare_servers`)，隨時等著接收新的連線\n- ondemand: 用多少量就開多少行程\n\n#### dynamic 實際運作\n\n當我們設定 `pm = dynamic` 並啟動時，首先會產生一定數量的行程(根據 `pm.start_servers`)，此參數可以想像成是最小數量的子程序，而最大數量的子程序則根據 `pm.max_children`，有了最大和最小子程序數量，也就是說服務過程中子程序數量會在最大和最小子程序數量間變化。\n\n而閒置的子程序數量則由 `pm.min_spare_servers`、`pm.max_spare_servers` 控制，超過 `pm.max_spare_servers` 的閒置子程序則會被 Kill。\n\n因為 dynamic 模式可以針對伺服器的回應做最大的優化，但相反的代價是可能造成更多記憶體的佔用，這邊舉例來說，假設 `pm.max_spare_servers = 10`、`pm.max_children = 20`，在某個尖峰時段，這時候最大數量的子程序 20 個都處於忙碌狀態，0個閒置的子程序，過了尖峰時段，請求下降，而當初忙碌的 20 個子程序目前處於閒置狀態，此時 PHP-FPM 只會 Kill 掉 10 個子程序，而最後剩下 10 個閒置的子程序來等待請求，這也就是會造成在尖峰後請求數大量減少後，記憶體卻沒有大量降低的主要原因，而如果把主機重啟，記憶體則會將得更低，這是因為重啟用子程序數量會變成最小閒置行程數量(`pm.min_spare_servers`)\n\n#### ondemand 實際運作\n\n`pm = ondemand` 的運作方式與 dynamic 恰好相反，dynamic 針對伺服器的回應做最大的優化，而 ondemand 則是最佳化記憶體。\n\n而運作方式是，每個閒置的子程序在持續閒置超過 `pm.process_idle_timeout` 設定的時間，就會被 Kill 掉，這樣的模式讓主機在尖峰時期過後可以自然地降低記憶體的使用率，如果長時間都沒有請求連線時，只會有一個 PHP-FPM 主程序。\n\n那壞處則是，如果遇到尖峰時期，或 `pm.process_idle_timeout` 設定得太短的話，會造成伺服器頻繁的建立子程序，而造成效能不佳\n\n## pm.max_children(最大行程數量)\n\n`pm.max_children` 參數在 `pm` 等於 `static` 即為開啟的行程數，而在 `dynamic` 與 `ondemand` 模式下，則是代表最大可開啟的行程數量。\n\n最大行程數量的多寡是根據本身主機的記憶體大小來決定，當記憶體越大時，就可以設定較多的行程數量。 此設定值如果設太小的話會造成處理請求的速度下降，設定太大的話會造成當機，因為記憶體耗盡，所以要依硬體資源來調較。\n\n可以利用以下指令去查詢行程使用的記憶體量\n\n```\n$ ps -ylC php-fpm --sort:rss\n\nS   UID     PID    PPID  C PRI  NI   RSS    SZ WCHAN  TTY          TIME CMD\nS     0       1       0  0  80   0  4760 20195 do_epo ?        00:02:11 php-fpm\nS    33       9       1  0  80   0 20260 22581 -      ?        00:01:20 php-fpm\nS    33       8       1  0  80   0 20464 22582 -      ?        00:01:42 php-fpm\nS    33       7       1  0  80   0 20476 22584 -      ?        00:01:43 php-fpm\n```\n\nRSS 欄位為子程序使用的記憶體大小，單位為KB，20476 約莫 20MB，但是因為每個子程序所使用的記憶體大小都不太一樣，所以我們可以使用下面的指令來求出子程序平均使用記憶體大小\n\n```\nps --no-headers -o \"rss,cmd\" -C php-fpm | awk '{ sum+=$1 } END { printf (\"%d%s\\n\", sum/NR/1024,\"Mb\") }'\n```\n\n至於 `pm.max_children` 應該要設定多少才合理，以下有一個計算公式\n\n```\npm.max_children = Total RAM / Max child process size\n```\n\n> 這邊的 Total RAM 需要扣除已經使用的記憶體，例如系統或其他程序使用後所剩餘的記憶體\n\n## pm.start_servers(初始行程數量)\n\n`pm.start_servers` 可設定 PHP-FPM 服務在一開始啟動時，要配置多少個行程\n\n`pm.start_servers` 同樣有一個計算公式可以參考\n\n```\npm.start_servers = min_spare_servers + (max_spare_servers - min_spare_servers) / 2\n```\n\n## pm.min_spare_servers(最小閒置行程數量)\n\n`pm.min_spare_servers` 設定 PHP-FPM 最小閒置行程的數量\n\n## pm.max_spare_servers(最大閒置行程數量)\n\n`pm.max_spare_servers` 設定 PHP-FPM 最大閒置行程的數量\n\n> 這邊需要注意的是 `pm.max_spare_servers` 的值只能小於等於 `pm.max_children`\n\n## pm.max_requests(單一行程可處理連線數)\n\n`pm.max_requests` 可設定單一 PHP-FPM 最多可以處理多少個連線，當一個行程處理的連線數達到設定值時，此行程會被 Kill 掉，而重新產生另一個新的行程\n\n## 參考資料\n\n- https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html\n- https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-\n- https://www.mdeditor.tw/pl/p9Vf/zh-tw\n","source":"_posts/PHP-FPM行程優化.md","raw":"---\ntitle: PHP-FPM行程優化\ndate: 2021-04-29 17:21:21\ntags:\n  - PHP-FPM\n---\n\n## 前言\n\n近期公司內部 PHP-FPM 有頂到一些行程相關的上限，導致網頁要處理後端程式時無法處理，進而造成服務異常。 而這樣子的問題不外乎可以從 LOG 去看到一些觸發到這個問題的根本原因是什麼。\n\n以下列了兩個行程不夠時常見的 Error Log\n\n```\nWARNING: [pool www] server reached pm.max_children setting (5), consider raising it\n```\n\n```\nWARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 32 children, there are 0 idle, and 19 total child\n```\n\n<!--more-->\n\nPHP-FPM 行程優化相關參數，以下為預設值，需要依照每台機器狀態不同去調教\n\n```\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\n\npm.max_requests = 500\npm.process_idle_timeout = 10s # 需搭配 pm = ondemand\n```\n\n以下會針對每個項目去解釋其用途\n\n## pm (Process Manager)\n\npm 為行程管理(Process Manager) 的縮寫，此參數主要是在設定 pm 要使用哪種模式來管理行程，可以區分兩大類型，共三種模式可以選擇，預設是使用 dynamic\n\n### 固定行程數量\n- static: 設定此模式，只有 `pm.max_children` 參數會生效，行程數量則根據 `pm.max_children`，效能較好，因為 child process 會保持一個固定的數量，但是比較佔記憶體，因為即便請求較少量時，依然會佔用，所以較不建議使用此模式\n\n### 動態行程數量\n\n皆根據 `pm.max_children`、`pm.start_servers`、`pm.min_spare_servers`、`pm.max_spare_servers` 動態調整\n\n- dynamic: 根據使用量用多寡開行程，但當使用量比較低時，會保留固定行程(根據 `pm.min_spare_servers` 或 `pm.max_spare_servers`)，隨時等著接收新的連線\n- ondemand: 用多少量就開多少行程\n\n#### dynamic 實際運作\n\n當我們設定 `pm = dynamic` 並啟動時，首先會產生一定數量的行程(根據 `pm.start_servers`)，此參數可以想像成是最小數量的子程序，而最大數量的子程序則根據 `pm.max_children`，有了最大和最小子程序數量，也就是說服務過程中子程序數量會在最大和最小子程序數量間變化。\n\n而閒置的子程序數量則由 `pm.min_spare_servers`、`pm.max_spare_servers` 控制，超過 `pm.max_spare_servers` 的閒置子程序則會被 Kill。\n\n因為 dynamic 模式可以針對伺服器的回應做最大的優化，但相反的代價是可能造成更多記憶體的佔用，這邊舉例來說，假設 `pm.max_spare_servers = 10`、`pm.max_children = 20`，在某個尖峰時段，這時候最大數量的子程序 20 個都處於忙碌狀態，0個閒置的子程序，過了尖峰時段，請求下降，而當初忙碌的 20 個子程序目前處於閒置狀態，此時 PHP-FPM 只會 Kill 掉 10 個子程序，而最後剩下 10 個閒置的子程序來等待請求，這也就是會造成在尖峰後請求數大量減少後，記憶體卻沒有大量降低的主要原因，而如果把主機重啟，記憶體則會將得更低，這是因為重啟用子程序數量會變成最小閒置行程數量(`pm.min_spare_servers`)\n\n#### ondemand 實際運作\n\n`pm = ondemand` 的運作方式與 dynamic 恰好相反，dynamic 針對伺服器的回應做最大的優化，而 ondemand 則是最佳化記憶體。\n\n而運作方式是，每個閒置的子程序在持續閒置超過 `pm.process_idle_timeout` 設定的時間，就會被 Kill 掉，這樣的模式讓主機在尖峰時期過後可以自然地降低記憶體的使用率，如果長時間都沒有請求連線時，只會有一個 PHP-FPM 主程序。\n\n那壞處則是，如果遇到尖峰時期，或 `pm.process_idle_timeout` 設定得太短的話，會造成伺服器頻繁的建立子程序，而造成效能不佳\n\n## pm.max_children(最大行程數量)\n\n`pm.max_children` 參數在 `pm` 等於 `static` 即為開啟的行程數，而在 `dynamic` 與 `ondemand` 模式下，則是代表最大可開啟的行程數量。\n\n最大行程數量的多寡是根據本身主機的記憶體大小來決定，當記憶體越大時，就可以設定較多的行程數量。 此設定值如果設太小的話會造成處理請求的速度下降，設定太大的話會造成當機，因為記憶體耗盡，所以要依硬體資源來調較。\n\n可以利用以下指令去查詢行程使用的記憶體量\n\n```\n$ ps -ylC php-fpm --sort:rss\n\nS   UID     PID    PPID  C PRI  NI   RSS    SZ WCHAN  TTY          TIME CMD\nS     0       1       0  0  80   0  4760 20195 do_epo ?        00:02:11 php-fpm\nS    33       9       1  0  80   0 20260 22581 -      ?        00:01:20 php-fpm\nS    33       8       1  0  80   0 20464 22582 -      ?        00:01:42 php-fpm\nS    33       7       1  0  80   0 20476 22584 -      ?        00:01:43 php-fpm\n```\n\nRSS 欄位為子程序使用的記憶體大小，單位為KB，20476 約莫 20MB，但是因為每個子程序所使用的記憶體大小都不太一樣，所以我們可以使用下面的指令來求出子程序平均使用記憶體大小\n\n```\nps --no-headers -o \"rss,cmd\" -C php-fpm | awk '{ sum+=$1 } END { printf (\"%d%s\\n\", sum/NR/1024,\"Mb\") }'\n```\n\n至於 `pm.max_children` 應該要設定多少才合理，以下有一個計算公式\n\n```\npm.max_children = Total RAM / Max child process size\n```\n\n> 這邊的 Total RAM 需要扣除已經使用的記憶體，例如系統或其他程序使用後所剩餘的記憶體\n\n## pm.start_servers(初始行程數量)\n\n`pm.start_servers` 可設定 PHP-FPM 服務在一開始啟動時，要配置多少個行程\n\n`pm.start_servers` 同樣有一個計算公式可以參考\n\n```\npm.start_servers = min_spare_servers + (max_spare_servers - min_spare_servers) / 2\n```\n\n## pm.min_spare_servers(最小閒置行程數量)\n\n`pm.min_spare_servers` 設定 PHP-FPM 最小閒置行程的數量\n\n## pm.max_spare_servers(最大閒置行程數量)\n\n`pm.max_spare_servers` 設定 PHP-FPM 最大閒置行程的數量\n\n> 這邊需要注意的是 `pm.max_spare_servers` 的值只能小於等於 `pm.max_children`\n\n## pm.max_requests(單一行程可處理連線數)\n\n`pm.max_requests` 可設定單一 PHP-FPM 最多可以處理多少個連線，當一個行程處理的連線數達到設定值時，此行程會被 Kill 掉，而重新產生另一個新的行程\n\n## 參考資料\n\n- https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html\n- https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-\n- https://www.mdeditor.tw/pl/p9Vf/zh-tw\n","slug":"PHP-FPM行程優化","published":1,"updated":"2021-04-29T09:31:57.940Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4j6stw00016w1e7whb2mmn","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>近期公司內部 PHP-FPM 有頂到一些行程相關的上限，導致網頁要處理後端程式時無法處理，進而造成服務異常。 而這樣子的問題不外乎可以從 LOG 去看到一些觸發到這個問題的根本原因是什麼。</p>\n<p>以下列了兩個行程不夠時常見的 Error Log</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WARNING: [pool www] server reached pm.max_children setting (5), consider raising it</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min&#x2F;max_spare_servers), spawning 32 children, there are 0 idle, and 19 total child</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>PHP-FPM 行程優化相關參數，以下為預設值，需要依照每台機器狀態不同去調教</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm &#x3D; dynamic</span><br><span class=\"line\">pm.max_children &#x3D; 5</span><br><span class=\"line\">pm.start_servers &#x3D; 2</span><br><span class=\"line\">pm.min_spare_servers &#x3D; 1</span><br><span class=\"line\">pm.max_spare_servers &#x3D; 3</span><br><span class=\"line\"></span><br><span class=\"line\">pm.max_requests &#x3D; 500</span><br><span class=\"line\">pm.process_idle_timeout &#x3D; 10s # 需搭配 pm &#x3D; ondemand</span><br></pre></td></tr></table></figure>\n\n<p>以下會針對每個項目去解釋其用途</p>\n<h2 id=\"pm-Process-Manager\"><a href=\"#pm-Process-Manager\" class=\"headerlink\" title=\"pm (Process Manager)\"></a>pm (Process Manager)</h2><p>pm 為行程管理(Process Manager) 的縮寫，此參數主要是在設定 pm 要使用哪種模式來管理行程，可以區分兩大類型，共三種模式可以選擇，預設是使用 dynamic</p>\n<h3 id=\"固定行程數量\"><a href=\"#固定行程數量\" class=\"headerlink\" title=\"固定行程數量\"></a>固定行程數量</h3><ul>\n<li>static: 設定此模式，只有 <code>pm.max_children</code> 參數會生效，行程數量則根據 <code>pm.max_children</code>，效能較好，因為 child process 會保持一個固定的數量，但是比較佔記憶體，因為即便請求較少量時，依然會佔用，所以較不建議使用此模式</li>\n</ul>\n<h3 id=\"動態行程數量\"><a href=\"#動態行程數量\" class=\"headerlink\" title=\"動態行程數量\"></a>動態行程數量</h3><p>皆根據 <code>pm.max_children</code>、<code>pm.start_servers</code>、<code>pm.min_spare_servers</code>、<code>pm.max_spare_servers</code> 動態調整</p>\n<ul>\n<li>dynamic: 根據使用量用多寡開行程，但當使用量比較低時，會保留固定行程(根據 <code>pm.min_spare_servers</code> 或 <code>pm.max_spare_servers</code>)，隨時等著接收新的連線</li>\n<li>ondemand: 用多少量就開多少行程</li>\n</ul>\n<h4 id=\"dynamic-實際運作\"><a href=\"#dynamic-實際運作\" class=\"headerlink\" title=\"dynamic 實際運作\"></a>dynamic 實際運作</h4><p>當我們設定 <code>pm = dynamic</code> 並啟動時，首先會產生一定數量的行程(根據 <code>pm.start_servers</code>)，此參數可以想像成是最小數量的子程序，而最大數量的子程序則根據 <code>pm.max_children</code>，有了最大和最小子程序數量，也就是說服務過程中子程序數量會在最大和最小子程序數量間變化。</p>\n<p>而閒置的子程序數量則由 <code>pm.min_spare_servers</code>、<code>pm.max_spare_servers</code> 控制，超過 <code>pm.max_spare_servers</code> 的閒置子程序則會被 Kill。</p>\n<p>因為 dynamic 模式可以針對伺服器的回應做最大的優化，但相反的代價是可能造成更多記憶體的佔用，這邊舉例來說，假設 <code>pm.max_spare_servers = 10</code>、<code>pm.max_children = 20</code>，在某個尖峰時段，這時候最大數量的子程序 20 個都處於忙碌狀態，0個閒置的子程序，過了尖峰時段，請求下降，而當初忙碌的 20 個子程序目前處於閒置狀態，此時 PHP-FPM 只會 Kill 掉 10 個子程序，而最後剩下 10 個閒置的子程序來等待請求，這也就是會造成在尖峰後請求數大量減少後，記憶體卻沒有大量降低的主要原因，而如果把主機重啟，記憶體則會將得更低，這是因為重啟用子程序數量會變成最小閒置行程數量(<code>pm.min_spare_servers</code>)</p>\n<h4 id=\"ondemand-實際運作\"><a href=\"#ondemand-實際運作\" class=\"headerlink\" title=\"ondemand 實際運作\"></a>ondemand 實際運作</h4><p><code>pm = ondemand</code> 的運作方式與 dynamic 恰好相反，dynamic 針對伺服器的回應做最大的優化，而 ondemand 則是最佳化記憶體。</p>\n<p>而運作方式是，每個閒置的子程序在持續閒置超過 <code>pm.process_idle_timeout</code> 設定的時間，就會被 Kill 掉，這樣的模式讓主機在尖峰時期過後可以自然地降低記憶體的使用率，如果長時間都沒有請求連線時，只會有一個 PHP-FPM 主程序。</p>\n<p>那壞處則是，如果遇到尖峰時期，或 <code>pm.process_idle_timeout</code> 設定得太短的話，會造成伺服器頻繁的建立子程序，而造成效能不佳</p>\n<h2 id=\"pm-max-children-最大行程數量\"><a href=\"#pm-max-children-最大行程數量\" class=\"headerlink\" title=\"pm.max_children(最大行程數量)\"></a>pm.max_children(最大行程數量)</h2><p><code>pm.max_children</code> 參數在 <code>pm</code> 等於 <code>static</code> 即為開啟的行程數，而在 <code>dynamic</code> 與 <code>ondemand</code> 模式下，則是代表最大可開啟的行程數量。</p>\n<p>最大行程數量的多寡是根據本身主機的記憶體大小來決定，當記憶體越大時，就可以設定較多的行程數量。 此設定值如果設太小的話會造成處理請求的速度下降，設定太大的話會造成當機，因為記憶體耗盡，所以要依硬體資源來調較。</p>\n<p>可以利用以下指令去查詢行程使用的記憶體量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ps -ylC php-fpm --sort:rss</span><br><span class=\"line\"></span><br><span class=\"line\">S   UID     PID    PPID  C PRI  NI   RSS    SZ WCHAN  TTY          TIME CMD</span><br><span class=\"line\">S     0       1       0  0  80   0  4760 20195 do_epo ?        00:02:11 php-fpm</span><br><span class=\"line\">S    33       9       1  0  80   0 20260 22581 -      ?        00:01:20 php-fpm</span><br><span class=\"line\">S    33       8       1  0  80   0 20464 22582 -      ?        00:01:42 php-fpm</span><br><span class=\"line\">S    33       7       1  0  80   0 20476 22584 -      ?        00:01:43 php-fpm</span><br></pre></td></tr></table></figure>\n\n<p>RSS 欄位為子程序使用的記憶體大小，單位為KB，20476 約莫 20MB，但是因為每個子程序所使用的記憶體大小都不太一樣，所以我們可以使用下面的指令來求出子程序平均使用記憶體大小</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps --no-headers -o &quot;rss,cmd&quot; -C php-fpm | awk &#39;&#123; sum+&#x3D;$1 &#125; END &#123; printf (&quot;%d%s\\n&quot;, sum&#x2F;NR&#x2F;1024,&quot;Mb&quot;) &#125;&#39;</span><br></pre></td></tr></table></figure>\n\n<p>至於 <code>pm.max_children</code> 應該要設定多少才合理，以下有一個計算公式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm.max_children &#x3D; Total RAM &#x2F; Max child process size</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>這邊的 Total RAM 需要扣除已經使用的記憶體，例如系統或其他程序使用後所剩餘的記憶體</p>\n</blockquote>\n<h2 id=\"pm-start-servers-初始行程數量\"><a href=\"#pm-start-servers-初始行程數量\" class=\"headerlink\" title=\"pm.start_servers(初始行程數量)\"></a>pm.start_servers(初始行程數量)</h2><p><code>pm.start_servers</code> 可設定 PHP-FPM 服務在一開始啟動時，要配置多少個行程</p>\n<p><code>pm.start_servers</code> 同樣有一個計算公式可以參考</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm.start_servers &#x3D; min_spare_servers + (max_spare_servers - min_spare_servers) &#x2F; 2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"pm-min-spare-servers-最小閒置行程數量\"><a href=\"#pm-min-spare-servers-最小閒置行程數量\" class=\"headerlink\" title=\"pm.min_spare_servers(最小閒置行程數量)\"></a>pm.min_spare_servers(最小閒置行程數量)</h2><p><code>pm.min_spare_servers</code> 設定 PHP-FPM 最小閒置行程的數量</p>\n<h2 id=\"pm-max-spare-servers-最大閒置行程數量\"><a href=\"#pm-max-spare-servers-最大閒置行程數量\" class=\"headerlink\" title=\"pm.max_spare_servers(最大閒置行程數量)\"></a>pm.max_spare_servers(最大閒置行程數量)</h2><p><code>pm.max_spare_servers</code> 設定 PHP-FPM 最大閒置行程的數量</p>\n<blockquote>\n<p>這邊需要注意的是 <code>pm.max_spare_servers</code> 的值只能小於等於 <code>pm.max_children</code></p>\n</blockquote>\n<h2 id=\"pm-max-requests-單一行程可處理連線數\"><a href=\"#pm-max-requests-單一行程可處理連線數\" class=\"headerlink\" title=\"pm.max_requests(單一行程可處理連線數)\"></a>pm.max_requests(單一行程可處理連線數)</h2><p><code>pm.max_requests</code> 可設定單一 PHP-FPM 最多可以處理多少個連線，當一個行程處理的連線數達到設定值時，此行程會被 Kill 掉，而重新產生另一個新的行程</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html\">https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html</a></li>\n<li><a href=\"https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-\">https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-</a></li>\n<li><a href=\"https://www.mdeditor.tw/pl/p9Vf/zh-tw\">https://www.mdeditor.tw/pl/p9Vf/zh-tw</a></li>\n</ul>\n","site":{"data":{"post-body-end":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n","sidebar":"\n","styles":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}},"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>近期公司內部 PHP-FPM 有頂到一些行程相關的上限，導致網頁要處理後端程式時無法處理，進而造成服務異常。 而這樣子的問題不外乎可以從 LOG 去看到一些觸發到這個問題的根本原因是什麼。</p>\n<p>以下列了兩個行程不夠時常見的 Error Log</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WARNING: [pool www] server reached pm.max_children setting (5), consider raising it</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min&#x2F;max_spare_servers), spawning 32 children, there are 0 idle, and 19 total child</span><br></pre></td></tr></table></figure>","more":"<p>PHP-FPM 行程優化相關參數，以下為預設值，需要依照每台機器狀態不同去調教</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm &#x3D; dynamic</span><br><span class=\"line\">pm.max_children &#x3D; 5</span><br><span class=\"line\">pm.start_servers &#x3D; 2</span><br><span class=\"line\">pm.min_spare_servers &#x3D; 1</span><br><span class=\"line\">pm.max_spare_servers &#x3D; 3</span><br><span class=\"line\"></span><br><span class=\"line\">pm.max_requests &#x3D; 500</span><br><span class=\"line\">pm.process_idle_timeout &#x3D; 10s # 需搭配 pm &#x3D; ondemand</span><br></pre></td></tr></table></figure>\n\n<p>以下會針對每個項目去解釋其用途</p>\n<h2 id=\"pm-Process-Manager\"><a href=\"#pm-Process-Manager\" class=\"headerlink\" title=\"pm (Process Manager)\"></a>pm (Process Manager)</h2><p>pm 為行程管理(Process Manager) 的縮寫，此參數主要是在設定 pm 要使用哪種模式來管理行程，可以區分兩大類型，共三種模式可以選擇，預設是使用 dynamic</p>\n<h3 id=\"固定行程數量\"><a href=\"#固定行程數量\" class=\"headerlink\" title=\"固定行程數量\"></a>固定行程數量</h3><ul>\n<li>static: 設定此模式，只有 <code>pm.max_children</code> 參數會生效，行程數量則根據 <code>pm.max_children</code>，效能較好，因為 child process 會保持一個固定的數量，但是比較佔記憶體，因為即便請求較少量時，依然會佔用，所以較不建議使用此模式</li>\n</ul>\n<h3 id=\"動態行程數量\"><a href=\"#動態行程數量\" class=\"headerlink\" title=\"動態行程數量\"></a>動態行程數量</h3><p>皆根據 <code>pm.max_children</code>、<code>pm.start_servers</code>、<code>pm.min_spare_servers</code>、<code>pm.max_spare_servers</code> 動態調整</p>\n<ul>\n<li>dynamic: 根據使用量用多寡開行程，但當使用量比較低時，會保留固定行程(根據 <code>pm.min_spare_servers</code> 或 <code>pm.max_spare_servers</code>)，隨時等著接收新的連線</li>\n<li>ondemand: 用多少量就開多少行程</li>\n</ul>\n<h4 id=\"dynamic-實際運作\"><a href=\"#dynamic-實際運作\" class=\"headerlink\" title=\"dynamic 實際運作\"></a>dynamic 實際運作</h4><p>當我們設定 <code>pm = dynamic</code> 並啟動時，首先會產生一定數量的行程(根據 <code>pm.start_servers</code>)，此參數可以想像成是最小數量的子程序，而最大數量的子程序則根據 <code>pm.max_children</code>，有了最大和最小子程序數量，也就是說服務過程中子程序數量會在最大和最小子程序數量間變化。</p>\n<p>而閒置的子程序數量則由 <code>pm.min_spare_servers</code>、<code>pm.max_spare_servers</code> 控制，超過 <code>pm.max_spare_servers</code> 的閒置子程序則會被 Kill。</p>\n<p>因為 dynamic 模式可以針對伺服器的回應做最大的優化，但相反的代價是可能造成更多記憶體的佔用，這邊舉例來說，假設 <code>pm.max_spare_servers = 10</code>、<code>pm.max_children = 20</code>，在某個尖峰時段，這時候最大數量的子程序 20 個都處於忙碌狀態，0個閒置的子程序，過了尖峰時段，請求下降，而當初忙碌的 20 個子程序目前處於閒置狀態，此時 PHP-FPM 只會 Kill 掉 10 個子程序，而最後剩下 10 個閒置的子程序來等待請求，這也就是會造成在尖峰後請求數大量減少後，記憶體卻沒有大量降低的主要原因，而如果把主機重啟，記憶體則會將得更低，這是因為重啟用子程序數量會變成最小閒置行程數量(<code>pm.min_spare_servers</code>)</p>\n<h4 id=\"ondemand-實際運作\"><a href=\"#ondemand-實際運作\" class=\"headerlink\" title=\"ondemand 實際運作\"></a>ondemand 實際運作</h4><p><code>pm = ondemand</code> 的運作方式與 dynamic 恰好相反，dynamic 針對伺服器的回應做最大的優化，而 ondemand 則是最佳化記憶體。</p>\n<p>而運作方式是，每個閒置的子程序在持續閒置超過 <code>pm.process_idle_timeout</code> 設定的時間，就會被 Kill 掉，這樣的模式讓主機在尖峰時期過後可以自然地降低記憶體的使用率，如果長時間都沒有請求連線時，只會有一個 PHP-FPM 主程序。</p>\n<p>那壞處則是，如果遇到尖峰時期，或 <code>pm.process_idle_timeout</code> 設定得太短的話，會造成伺服器頻繁的建立子程序，而造成效能不佳</p>\n<h2 id=\"pm-max-children-最大行程數量\"><a href=\"#pm-max-children-最大行程數量\" class=\"headerlink\" title=\"pm.max_children(最大行程數量)\"></a>pm.max_children(最大行程數量)</h2><p><code>pm.max_children</code> 參數在 <code>pm</code> 等於 <code>static</code> 即為開啟的行程數，而在 <code>dynamic</code> 與 <code>ondemand</code> 模式下，則是代表最大可開啟的行程數量。</p>\n<p>最大行程數量的多寡是根據本身主機的記憶體大小來決定，當記憶體越大時，就可以設定較多的行程數量。 此設定值如果設太小的話會造成處理請求的速度下降，設定太大的話會造成當機，因為記憶體耗盡，所以要依硬體資源來調較。</p>\n<p>可以利用以下指令去查詢行程使用的記憶體量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ps -ylC php-fpm --sort:rss</span><br><span class=\"line\"></span><br><span class=\"line\">S   UID     PID    PPID  C PRI  NI   RSS    SZ WCHAN  TTY          TIME CMD</span><br><span class=\"line\">S     0       1       0  0  80   0  4760 20195 do_epo ?        00:02:11 php-fpm</span><br><span class=\"line\">S    33       9       1  0  80   0 20260 22581 -      ?        00:01:20 php-fpm</span><br><span class=\"line\">S    33       8       1  0  80   0 20464 22582 -      ?        00:01:42 php-fpm</span><br><span class=\"line\">S    33       7       1  0  80   0 20476 22584 -      ?        00:01:43 php-fpm</span><br></pre></td></tr></table></figure>\n\n<p>RSS 欄位為子程序使用的記憶體大小，單位為KB，20476 約莫 20MB，但是因為每個子程序所使用的記憶體大小都不太一樣，所以我們可以使用下面的指令來求出子程序平均使用記憶體大小</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps --no-headers -o &quot;rss,cmd&quot; -C php-fpm | awk &#39;&#123; sum+&#x3D;$1 &#125; END &#123; printf (&quot;%d%s\\n&quot;, sum&#x2F;NR&#x2F;1024,&quot;Mb&quot;) &#125;&#39;</span><br></pre></td></tr></table></figure>\n\n<p>至於 <code>pm.max_children</code> 應該要設定多少才合理，以下有一個計算公式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm.max_children &#x3D; Total RAM &#x2F; Max child process size</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>這邊的 Total RAM 需要扣除已經使用的記憶體，例如系統或其他程序使用後所剩餘的記憶體</p>\n</blockquote>\n<h2 id=\"pm-start-servers-初始行程數量\"><a href=\"#pm-start-servers-初始行程數量\" class=\"headerlink\" title=\"pm.start_servers(初始行程數量)\"></a>pm.start_servers(初始行程數量)</h2><p><code>pm.start_servers</code> 可設定 PHP-FPM 服務在一開始啟動時，要配置多少個行程</p>\n<p><code>pm.start_servers</code> 同樣有一個計算公式可以參考</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pm.start_servers &#x3D; min_spare_servers + (max_spare_servers - min_spare_servers) &#x2F; 2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"pm-min-spare-servers-最小閒置行程數量\"><a href=\"#pm-min-spare-servers-最小閒置行程數量\" class=\"headerlink\" title=\"pm.min_spare_servers(最小閒置行程數量)\"></a>pm.min_spare_servers(最小閒置行程數量)</h2><p><code>pm.min_spare_servers</code> 設定 PHP-FPM 最小閒置行程的數量</p>\n<h2 id=\"pm-max-spare-servers-最大閒置行程數量\"><a href=\"#pm-max-spare-servers-最大閒置行程數量\" class=\"headerlink\" title=\"pm.max_spare_servers(最大閒置行程數量)\"></a>pm.max_spare_servers(最大閒置行程數量)</h2><p><code>pm.max_spare_servers</code> 設定 PHP-FPM 最大閒置行程的數量</p>\n<blockquote>\n<p>這邊需要注意的是 <code>pm.max_spare_servers</code> 的值只能小於等於 <code>pm.max_children</code></p>\n</blockquote>\n<h2 id=\"pm-max-requests-單一行程可處理連線數\"><a href=\"#pm-max-requests-單一行程可處理連線數\" class=\"headerlink\" title=\"pm.max_requests(單一行程可處理連線數)\"></a>pm.max_requests(單一行程可處理連線數)</h2><p><code>pm.max_requests</code> 可設定單一 PHP-FPM 最多可以處理多少個連線，當一個行程處理的連線數達到設定值時，此行程會被 Kill 掉，而重新產生另一個新的行程</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html\">https://kejyuntw.gitbooks.io/ubuntu-learning-notes/content/web/php/web-php-max-children.html</a></li>\n<li><a href=\"https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-\">https://support.plesk.com/hc/en-us/articles/360011988053-How-to-calculate-pm-max-children-value-</a></li>\n<li><a href=\"https://www.mdeditor.tw/pl/p9Vf/zh-tw\">https://www.mdeditor.tw/pl/p9Vf/zh-tw</a></li>\n</ul>"},{"title":"在 K8s 使用 FTP","date":"2021-04-26T08:15:09.000Z","_content":"\n## 前言\n\n近期因公司內部的需求，需要在本機存取 K8s 內持久化儲存的檔案，原先想使用 NFS 架構來做掛載存取，但是因為這樣有點過於麻煩，後來才想使用 FTP 來實現，下面說明如何在 K8s 實現 FTP 功能，讓本機環境可以存取到持久化硬碟。\n\n<!--more-->\n\n這邊實現的是 SFTP 使用 22 port 連線，存取認證方式可以是使用「金鑰」或是「帳號/密碼驗證」\n\n這邊先簡單羅列步驟：\n1. 產生 ssh 認證使用的金鑰\n2. 編寫 Dockerfile\n3. 編寫 K8s YAML 檔案\n4. 暴露一個 External LoadBalace\n5. 使用 FileZilla 測試\n\n> 環境是使用 GKE(Google Kubernetes Engine)\n\n## 產生 ssh 金鑰\n\n產生 ssh 金鑰是為了讓後續連線時，可以使用金鑰作為驗證，這邊是使用 Mac 的終端機產生，指令參照以下\n\n```\n$ ssh-keygen -t rsa -b 4096 -f sftp_key\n```\n\n> Passphrase 設不設定都可以，如果有設定的話，最後以 FileZilla 測試時，private key 需要額外產生 .ppk 檔才能使用，後續會講解\n\n完成後，在你目前位置的目錄上會出現一對金鑰，一個為 public key 另一個為 private key\n\n> 一般來說，我們都會習慣把金鑰統一放置在本機家目錄底下的 .ssh 目錄內，如果自己有習慣的放置地方也可以放到自己習慣的位置\n\n## 編寫 Dockerfile\n\n我們需要將 public key 放進映像檔中，這樣在連線時才有辦法做金鑰驗證。 要實現這方式有兩個：\n\n- 在 ftp 服務啟動時以 volume 方式掛載 public key 到相對位置\n- 直接複製到映像檔內\n\n這邊採用的是第二種方式，編寫 Dockerfile 並將 public key 放進去，我們要將 public key 放到使用者家目錄底下的 `./.ssh/keys` 位置，所以我們需要建立相對應路徑，並將複製進去，可以參考以下\n\n```\nFROM atmoz/sftp:alpine\n\nRUN mkdir -p /home/rd/.ssh/keys\nCOPY ./sftp_key.pub /home/rd/.ssh/keys/\n```\n\n這邊使用的 base image 是 atmoz/sftp:alpine，當然你也可以選擇其他版本(eg. debian...)。\n\n最後進行 docker build 的動作，並上傳到存放區\n\n```\n$ docker build --no-cache -t custom-sftp:alpine -f Dockerfile .\n```\n\n## 編寫 K8s YAML 檔案\n\n因為我們要運行在 GKE 上面，需要編寫 YAML 以便運行與後續管理，這邊是使用 Deployment 的 Object，以下只截取部片重要片段，其餘部分需要自行補齊\n\n```\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ftp\n  namespace: default\n...\n    spec:\n      restartPolicy: Always\n      containers:\n      - name: ftp\n        image: [修改為剛剛上傳的映像檔路徑]\n        imagePullPolicy: Always\n        ports:\n          - containerPort: 22\n        args:\n          - rd::::upload\n        volumeMounts:\n          - name: volume-test\n            mountPath: /home/rd/upload/test\n            subPath: upload-image\n      volumes:\n        - name: volume-test\n          persistentVolumeClaim:\n            claimName: mypvc\n```\n\n### snippet 解析\n\n```\nargs:\n  - rd::::upload\n```\n\n啟動參數的意義，這邊是 `rd::::upload`，這表示使用者帳號為rd，並且在家目錄底下建立一個 upload 的目錄(`/home/rd/upload`)，以便做存取，這樣我們就能夠將持久化硬碟掛載到 `/home/rd/upload` 路徑底下。\n\n> 使用者帳號可以自訂，不一定要使用rd\n\n可以看到 rd 的帳號並沒有設定密碼，在沒有設定密碼的情況下，表示認證會使用金鑰認證，那如果要使用密碼驗證可以這樣表示\n\n```\nrd:12345:::upload\n```\n\n這樣表示密碼為 12345\n\n## 暴露一個 External LoadBalace\n\n暴露外部 LB 這樣可以讓本機去存取到 GKE 內的服務，但是白名單記得要設定，以提高安全性\n\n```\napiVersion: v1\nkind: Service\nmetadata:\n  name: ftp-proxy\n  namespace: default\nspec:\n  type: LoadBalancer\n  loadBalancerIP: [填入自己的外網IP]\n  loadBalancerSourceRanges:\n  - [填入自己的白名單]\n  ports:\n    - name: ssh\n      port: 22\n      protocol: TCP\n      targetPort: 22\n  selector:\n    app: ftp\n```\n\n### snippet 解析\n\n```\n...\nports:\n  - name: ssh\n    port: 22\n    protocol: TCP\n    targetPort: 22\n...\n```\n\n其中這段 port 有沒有要改成其他非預設 22 port 都可以，以安全性角度來說可以做個修改，例如 `port: 14322`。 這樣連線時就使用 14322 做連線，GKE 就會自動做 port 的 mapping。\n\n## 使用 FileZilla 測試\n\n最後我們可以下載 FileZilla Client 來測試，如果剛才編寫 Deployment 的 YAML 時，啟動參數有設定密碼的話，就可以直接填入相關資訊做連線測試了。\n\n填入資訊\n- 主機: 填入External LoadBalance 的 IP\n- 使用者名稱: 填入啟動參數設定的使用者\n- 密碼: 填入啟動參數設定的密碼\n- 連接埠: 預設是22，如果剛剛在編寫 External LoadBalace 時，有修改 port，這邊記得要跟著變\n\n如果是使用金鑰驗證，我們要先設定好 private key 的位置，開啟 FileZilla Client，依照下圖點選到設定位置\n\n點選 編輯 > 設定\n\n![](0.png)\n\n選擇 SFTP 並點選「加入金鑰檔案」，此時會請你選擇 private key 的位置\n\n![](1.png)\n\n這邊要注意一下，如果一開始產生金鑰時有設定 passphrase，會跳出此視窗，主要是因為他需要將 .key 轉成 .ppk，這邊直接點「是」\n\n![](2.png)\n\n輸入設定的 passphrase\n\n![](3.png)\n\n選擇鑰儲存 .ppk 的位置與命名\n\n![](4.png)\n\n最後再回到主畫面將連線資訊填入，密碼不用填寫，當連線後，會請你輸入 passphrase 的密碼\n","source":"_posts/在K8s使用FTP.md","raw":"---\ntitle: 在 K8s 使用 FTP\ndate: 2021-04-26 16:15:09\ntags:\n  - GKE\n  - GCP\n  - K8s\n  - kubernetes\n  - ftp\n---\n\n## 前言\n\n近期因公司內部的需求，需要在本機存取 K8s 內持久化儲存的檔案，原先想使用 NFS 架構來做掛載存取，但是因為這樣有點過於麻煩，後來才想使用 FTP 來實現，下面說明如何在 K8s 實現 FTP 功能，讓本機環境可以存取到持久化硬碟。\n\n<!--more-->\n\n這邊實現的是 SFTP 使用 22 port 連線，存取認證方式可以是使用「金鑰」或是「帳號/密碼驗證」\n\n這邊先簡單羅列步驟：\n1. 產生 ssh 認證使用的金鑰\n2. 編寫 Dockerfile\n3. 編寫 K8s YAML 檔案\n4. 暴露一個 External LoadBalace\n5. 使用 FileZilla 測試\n\n> 環境是使用 GKE(Google Kubernetes Engine)\n\n## 產生 ssh 金鑰\n\n產生 ssh 金鑰是為了讓後續連線時，可以使用金鑰作為驗證，這邊是使用 Mac 的終端機產生，指令參照以下\n\n```\n$ ssh-keygen -t rsa -b 4096 -f sftp_key\n```\n\n> Passphrase 設不設定都可以，如果有設定的話，最後以 FileZilla 測試時，private key 需要額外產生 .ppk 檔才能使用，後續會講解\n\n完成後，在你目前位置的目錄上會出現一對金鑰，一個為 public key 另一個為 private key\n\n> 一般來說，我們都會習慣把金鑰統一放置在本機家目錄底下的 .ssh 目錄內，如果自己有習慣的放置地方也可以放到自己習慣的位置\n\n## 編寫 Dockerfile\n\n我們需要將 public key 放進映像檔中，這樣在連線時才有辦法做金鑰驗證。 要實現這方式有兩個：\n\n- 在 ftp 服務啟動時以 volume 方式掛載 public key 到相對位置\n- 直接複製到映像檔內\n\n這邊採用的是第二種方式，編寫 Dockerfile 並將 public key 放進去，我們要將 public key 放到使用者家目錄底下的 `./.ssh/keys` 位置，所以我們需要建立相對應路徑，並將複製進去，可以參考以下\n\n```\nFROM atmoz/sftp:alpine\n\nRUN mkdir -p /home/rd/.ssh/keys\nCOPY ./sftp_key.pub /home/rd/.ssh/keys/\n```\n\n這邊使用的 base image 是 atmoz/sftp:alpine，當然你也可以選擇其他版本(eg. debian...)。\n\n最後進行 docker build 的動作，並上傳到存放區\n\n```\n$ docker build --no-cache -t custom-sftp:alpine -f Dockerfile .\n```\n\n## 編寫 K8s YAML 檔案\n\n因為我們要運行在 GKE 上面，需要編寫 YAML 以便運行與後續管理，這邊是使用 Deployment 的 Object，以下只截取部片重要片段，其餘部分需要自行補齊\n\n```\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ftp\n  namespace: default\n...\n    spec:\n      restartPolicy: Always\n      containers:\n      - name: ftp\n        image: [修改為剛剛上傳的映像檔路徑]\n        imagePullPolicy: Always\n        ports:\n          - containerPort: 22\n        args:\n          - rd::::upload\n        volumeMounts:\n          - name: volume-test\n            mountPath: /home/rd/upload/test\n            subPath: upload-image\n      volumes:\n        - name: volume-test\n          persistentVolumeClaim:\n            claimName: mypvc\n```\n\n### snippet 解析\n\n```\nargs:\n  - rd::::upload\n```\n\n啟動參數的意義，這邊是 `rd::::upload`，這表示使用者帳號為rd，並且在家目錄底下建立一個 upload 的目錄(`/home/rd/upload`)，以便做存取，這樣我們就能夠將持久化硬碟掛載到 `/home/rd/upload` 路徑底下。\n\n> 使用者帳號可以自訂，不一定要使用rd\n\n可以看到 rd 的帳號並沒有設定密碼，在沒有設定密碼的情況下，表示認證會使用金鑰認證，那如果要使用密碼驗證可以這樣表示\n\n```\nrd:12345:::upload\n```\n\n這樣表示密碼為 12345\n\n## 暴露一個 External LoadBalace\n\n暴露外部 LB 這樣可以讓本機去存取到 GKE 內的服務，但是白名單記得要設定，以提高安全性\n\n```\napiVersion: v1\nkind: Service\nmetadata:\n  name: ftp-proxy\n  namespace: default\nspec:\n  type: LoadBalancer\n  loadBalancerIP: [填入自己的外網IP]\n  loadBalancerSourceRanges:\n  - [填入自己的白名單]\n  ports:\n    - name: ssh\n      port: 22\n      protocol: TCP\n      targetPort: 22\n  selector:\n    app: ftp\n```\n\n### snippet 解析\n\n```\n...\nports:\n  - name: ssh\n    port: 22\n    protocol: TCP\n    targetPort: 22\n...\n```\n\n其中這段 port 有沒有要改成其他非預設 22 port 都可以，以安全性角度來說可以做個修改，例如 `port: 14322`。 這樣連線時就使用 14322 做連線，GKE 就會自動做 port 的 mapping。\n\n## 使用 FileZilla 測試\n\n最後我們可以下載 FileZilla Client 來測試，如果剛才編寫 Deployment 的 YAML 時，啟動參數有設定密碼的話，就可以直接填入相關資訊做連線測試了。\n\n填入資訊\n- 主機: 填入External LoadBalance 的 IP\n- 使用者名稱: 填入啟動參數設定的使用者\n- 密碼: 填入啟動參數設定的密碼\n- 連接埠: 預設是22，如果剛剛在編寫 External LoadBalace 時，有修改 port，這邊記得要跟著變\n\n如果是使用金鑰驗證，我們要先設定好 private key 的位置，開啟 FileZilla Client，依照下圖點選到設定位置\n\n點選 編輯 > 設定\n\n![](0.png)\n\n選擇 SFTP 並點選「加入金鑰檔案」，此時會請你選擇 private key 的位置\n\n![](1.png)\n\n這邊要注意一下，如果一開始產生金鑰時有設定 passphrase，會跳出此視窗，主要是因為他需要將 .key 轉成 .ppk，這邊直接點「是」\n\n![](2.png)\n\n輸入設定的 passphrase\n\n![](3.png)\n\n選擇鑰儲存 .ppk 的位置與命名\n\n![](4.png)\n\n最後再回到主畫面將連線資訊填入，密碼不用填寫，當連線後，會請你輸入 passphrase 的密碼\n","slug":"在K8s使用FTP","published":1,"updated":"2021-04-29T09:34:38.569Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4j6su000036w1e9hp46lp6","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>近期因公司內部的需求，需要在本機存取 K8s 內持久化儲存的檔案，原先想使用 NFS 架構來做掛載存取，但是因為這樣有點過於麻煩，後來才想使用 FTP 來實現，下面說明如何在 K8s 實現 FTP 功能，讓本機環境可以存取到持久化硬碟。</p>\n<span id=\"more\"></span>\n\n<p>這邊實現的是 SFTP 使用 22 port 連線，存取認證方式可以是使用「金鑰」或是「帳號/密碼驗證」</p>\n<p>這邊先簡單羅列步驟：</p>\n<ol>\n<li>產生 ssh 認證使用的金鑰</li>\n<li>編寫 Dockerfile</li>\n<li>編寫 K8s YAML 檔案</li>\n<li>暴露一個 External LoadBalace</li>\n<li>使用 FileZilla 測試</li>\n</ol>\n<blockquote>\n<p>環境是使用 GKE(Google Kubernetes Engine)</p>\n</blockquote>\n<h2 id=\"產生-ssh-金鑰\"><a href=\"#產生-ssh-金鑰\" class=\"headerlink\" title=\"產生 ssh 金鑰\"></a>產生 ssh 金鑰</h2><p>產生 ssh 金鑰是為了讓後續連線時，可以使用金鑰作為驗證，這邊是使用 Mac 的終端機產生，指令參照以下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ssh-keygen -t rsa -b 4096 -f sftp_key</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Passphrase 設不設定都可以，如果有設定的話，最後以 FileZilla 測試時，private key 需要額外產生 .ppk 檔才能使用，後續會講解</p>\n</blockquote>\n<p>完成後，在你目前位置的目錄上會出現一對金鑰，一個為 public key 另一個為 private key</p>\n<blockquote>\n<p>一般來說，我們都會習慣把金鑰統一放置在本機家目錄底下的 .ssh 目錄內，如果自己有習慣的放置地方也可以放到自己習慣的位置</p>\n</blockquote>\n<h2 id=\"編寫-Dockerfile\"><a href=\"#編寫-Dockerfile\" class=\"headerlink\" title=\"編寫 Dockerfile\"></a>編寫 Dockerfile</h2><p>我們需要將 public key 放進映像檔中，這樣在連線時才有辦法做金鑰驗證。 要實現這方式有兩個：</p>\n<ul>\n<li>在 ftp 服務啟動時以 volume 方式掛載 public key 到相對位置</li>\n<li>直接複製到映像檔內</li>\n</ul>\n<p>這邊採用的是第二種方式，編寫 Dockerfile 並將 public key 放進去，我們要將 public key 放到使用者家目錄底下的 <code>./.ssh/keys</code> 位置，所以我們需要建立相對應路徑，並將複製進去，可以參考以下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM atmoz&#x2F;sftp:alpine</span><br><span class=\"line\"></span><br><span class=\"line\">RUN mkdir -p &#x2F;home&#x2F;rd&#x2F;.ssh&#x2F;keys</span><br><span class=\"line\">COPY .&#x2F;sftp_key.pub &#x2F;home&#x2F;rd&#x2F;.ssh&#x2F;keys&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>這邊使用的 base image 是 atmoz/sftp:alpine，當然你也可以選擇其他版本(eg. debian…)。</p>\n<p>最後進行 docker build 的動作，並上傳到存放區</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker build --no-cache -t custom-sftp:alpine -f Dockerfile .</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"編寫-K8s-YAML-檔案\"><a href=\"#編寫-K8s-YAML-檔案\" class=\"headerlink\" title=\"編寫 K8s YAML 檔案\"></a>編寫 K8s YAML 檔案</h2><p>因為我們要運行在 GKE 上面，需要編寫 YAML 以便運行與後續管理，這邊是使用 Deployment 的 Object，以下只截取部片重要片段，其餘部分需要自行補齊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: apps&#x2F;v1</span><br><span class=\"line\">kind: Deployment</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ftp</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">...</span><br><span class=\"line\">    spec:</span><br><span class=\"line\">      restartPolicy: Always</span><br><span class=\"line\">      containers:</span><br><span class=\"line\">      - name: ftp</span><br><span class=\"line\">        image: [修改為剛剛上傳的映像檔路徑]</span><br><span class=\"line\">        imagePullPolicy: Always</span><br><span class=\"line\">        ports:</span><br><span class=\"line\">          - containerPort: 22</span><br><span class=\"line\">        args:</span><br><span class=\"line\">          - rd::::upload</span><br><span class=\"line\">        volumeMounts:</span><br><span class=\"line\">          - name: volume-test</span><br><span class=\"line\">            mountPath: &#x2F;home&#x2F;rd&#x2F;upload&#x2F;test</span><br><span class=\"line\">            subPath: upload-image</span><br><span class=\"line\">      volumes:</span><br><span class=\"line\">        - name: volume-test</span><br><span class=\"line\">          persistentVolumeClaim:</span><br><span class=\"line\">            claimName: mypvc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"snippet-解析\"><a href=\"#snippet-解析\" class=\"headerlink\" title=\"snippet 解析\"></a>snippet 解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">args:</span><br><span class=\"line\">  - rd::::upload</span><br></pre></td></tr></table></figure>\n\n<p>啟動參數的意義，這邊是 <code>rd::::upload</code>，這表示使用者帳號為rd，並且在家目錄底下建立一個 upload 的目錄(<code>/home/rd/upload</code>)，以便做存取，這樣我們就能夠將持久化硬碟掛載到 <code>/home/rd/upload</code> 路徑底下。</p>\n<blockquote>\n<p>使用者帳號可以自訂，不一定要使用rd</p>\n</blockquote>\n<p>可以看到 rd 的帳號並沒有設定密碼，在沒有設定密碼的情況下，表示認證會使用金鑰認證，那如果要使用密碼驗證可以這樣表示</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rd:12345:::upload</span><br></pre></td></tr></table></figure>\n\n<p>這樣表示密碼為 12345</p>\n<h2 id=\"暴露一個-External-LoadBalace\"><a href=\"#暴露一個-External-LoadBalace\" class=\"headerlink\" title=\"暴露一個 External LoadBalace\"></a>暴露一個 External LoadBalace</h2><p>暴露外部 LB 這樣可以讓本機去存取到 GKE 內的服務，但是白名單記得要設定，以提高安全性</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Service</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ftp-proxy</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  type: LoadBalancer</span><br><span class=\"line\">  loadBalancerIP: [填入自己的外網IP]</span><br><span class=\"line\">  loadBalancerSourceRanges:</span><br><span class=\"line\">  - [填入自己的白名單]</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">    - name: ssh</span><br><span class=\"line\">      port: 22</span><br><span class=\"line\">      protocol: TCP</span><br><span class=\"line\">      targetPort: 22</span><br><span class=\"line\">  selector:</span><br><span class=\"line\">    app: ftp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"snippet-解析-1\"><a href=\"#snippet-解析-1\" class=\"headerlink\" title=\"snippet 解析\"></a>snippet 解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">ports:</span><br><span class=\"line\">  - name: ssh</span><br><span class=\"line\">    port: 22</span><br><span class=\"line\">    protocol: TCP</span><br><span class=\"line\">    targetPort: 22</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p>其中這段 port 有沒有要改成其他非預設 22 port 都可以，以安全性角度來說可以做個修改，例如 <code>port: 14322</code>。 這樣連線時就使用 14322 做連線，GKE 就會自動做 port 的 mapping。</p>\n<h2 id=\"使用-FileZilla-測試\"><a href=\"#使用-FileZilla-測試\" class=\"headerlink\" title=\"使用 FileZilla 測試\"></a>使用 FileZilla 測試</h2><p>最後我們可以下載 FileZilla Client 來測試，如果剛才編寫 Deployment 的 YAML 時，啟動參數有設定密碼的話，就可以直接填入相關資訊做連線測試了。</p>\n<p>填入資訊</p>\n<ul>\n<li>主機: 填入External LoadBalance 的 IP</li>\n<li>使用者名稱: 填入啟動參數設定的使用者</li>\n<li>密碼: 填入啟動參數設定的密碼</li>\n<li>連接埠: 預設是22，如果剛剛在編寫 External LoadBalace 時，有修改 port，這邊記得要跟著變</li>\n</ul>\n<p>如果是使用金鑰驗證，我們要先設定好 private key 的位置，開啟 FileZilla Client，依照下圖點選到設定位置</p>\n<p>點選 編輯 &gt; 設定</p>\n<p><img src=\"0.png\"></p>\n<p>選擇 SFTP 並點選「加入金鑰檔案」，此時會請你選擇 private key 的位置</p>\n<p><img src=\"1.png\"></p>\n<p>這邊要注意一下，如果一開始產生金鑰時有設定 passphrase，會跳出此視窗，主要是因為他需要將 .key 轉成 .ppk，這邊直接點「是」</p>\n<p><img src=\"2.png\"></p>\n<p>輸入設定的 passphrase</p>\n<p><img src=\"3.png\"></p>\n<p>選擇鑰儲存 .ppk 的位置與命名</p>\n<p><img src=\"4.png\"></p>\n<p>最後再回到主畫面將連線資訊填入，密碼不用填寫，當連線後，會請你輸入 passphrase 的密碼</p>\n","site":{"data":{"post-body-end":"<div>\n  <script type=\"text/javascript\">\n    document.write(\n      \"<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/winds6206/button?referrer=\" +\n      encodeURIComponent(location.href.split(\"?\")[0].split(\"#\")[0]) + \"'></iframe>\");\n  </script>\n<div>\n","sidebar":"\n","styles":".links-of-recent-posts {\n  font-size: 0.8125em;\n  margin-top: 20px;\n}\n.links-of-recent-posts-title {\n  font-size: 1.03em;\n  font-weight: 600;\n  margin-top: 0;\n}\n.links-of-recent-posts-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n"}},"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>近期因公司內部的需求，需要在本機存取 K8s 內持久化儲存的檔案，原先想使用 NFS 架構來做掛載存取，但是因為這樣有點過於麻煩，後來才想使用 FTP 來實現，下面說明如何在 K8s 實現 FTP 功能，讓本機環境可以存取到持久化硬碟。</p>","more":"<p>這邊實現的是 SFTP 使用 22 port 連線，存取認證方式可以是使用「金鑰」或是「帳號/密碼驗證」</p>\n<p>這邊先簡單羅列步驟：</p>\n<ol>\n<li>產生 ssh 認證使用的金鑰</li>\n<li>編寫 Dockerfile</li>\n<li>編寫 K8s YAML 檔案</li>\n<li>暴露一個 External LoadBalace</li>\n<li>使用 FileZilla 測試</li>\n</ol>\n<blockquote>\n<p>環境是使用 GKE(Google Kubernetes Engine)</p>\n</blockquote>\n<h2 id=\"產生-ssh-金鑰\"><a href=\"#產生-ssh-金鑰\" class=\"headerlink\" title=\"產生 ssh 金鑰\"></a>產生 ssh 金鑰</h2><p>產生 ssh 金鑰是為了讓後續連線時，可以使用金鑰作為驗證，這邊是使用 Mac 的終端機產生，指令參照以下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ssh-keygen -t rsa -b 4096 -f sftp_key</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Passphrase 設不設定都可以，如果有設定的話，最後以 FileZilla 測試時，private key 需要額外產生 .ppk 檔才能使用，後續會講解</p>\n</blockquote>\n<p>完成後，在你目前位置的目錄上會出現一對金鑰，一個為 public key 另一個為 private key</p>\n<blockquote>\n<p>一般來說，我們都會習慣把金鑰統一放置在本機家目錄底下的 .ssh 目錄內，如果自己有習慣的放置地方也可以放到自己習慣的位置</p>\n</blockquote>\n<h2 id=\"編寫-Dockerfile\"><a href=\"#編寫-Dockerfile\" class=\"headerlink\" title=\"編寫 Dockerfile\"></a>編寫 Dockerfile</h2><p>我們需要將 public key 放進映像檔中，這樣在連線時才有辦法做金鑰驗證。 要實現這方式有兩個：</p>\n<ul>\n<li>在 ftp 服務啟動時以 volume 方式掛載 public key 到相對位置</li>\n<li>直接複製到映像檔內</li>\n</ul>\n<p>這邊採用的是第二種方式，編寫 Dockerfile 並將 public key 放進去，我們要將 public key 放到使用者家目錄底下的 <code>./.ssh/keys</code> 位置，所以我們需要建立相對應路徑，並將複製進去，可以參考以下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM atmoz&#x2F;sftp:alpine</span><br><span class=\"line\"></span><br><span class=\"line\">RUN mkdir -p &#x2F;home&#x2F;rd&#x2F;.ssh&#x2F;keys</span><br><span class=\"line\">COPY .&#x2F;sftp_key.pub &#x2F;home&#x2F;rd&#x2F;.ssh&#x2F;keys&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>這邊使用的 base image 是 atmoz/sftp:alpine，當然你也可以選擇其他版本(eg. debian…)。</p>\n<p>最後進行 docker build 的動作，並上傳到存放區</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker build --no-cache -t custom-sftp:alpine -f Dockerfile .</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"編寫-K8s-YAML-檔案\"><a href=\"#編寫-K8s-YAML-檔案\" class=\"headerlink\" title=\"編寫 K8s YAML 檔案\"></a>編寫 K8s YAML 檔案</h2><p>因為我們要運行在 GKE 上面，需要編寫 YAML 以便運行與後續管理，這邊是使用 Deployment 的 Object，以下只截取部片重要片段，其餘部分需要自行補齊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: apps&#x2F;v1</span><br><span class=\"line\">kind: Deployment</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ftp</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">...</span><br><span class=\"line\">    spec:</span><br><span class=\"line\">      restartPolicy: Always</span><br><span class=\"line\">      containers:</span><br><span class=\"line\">      - name: ftp</span><br><span class=\"line\">        image: [修改為剛剛上傳的映像檔路徑]</span><br><span class=\"line\">        imagePullPolicy: Always</span><br><span class=\"line\">        ports:</span><br><span class=\"line\">          - containerPort: 22</span><br><span class=\"line\">        args:</span><br><span class=\"line\">          - rd::::upload</span><br><span class=\"line\">        volumeMounts:</span><br><span class=\"line\">          - name: volume-test</span><br><span class=\"line\">            mountPath: &#x2F;home&#x2F;rd&#x2F;upload&#x2F;test</span><br><span class=\"line\">            subPath: upload-image</span><br><span class=\"line\">      volumes:</span><br><span class=\"line\">        - name: volume-test</span><br><span class=\"line\">          persistentVolumeClaim:</span><br><span class=\"line\">            claimName: mypvc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"snippet-解析\"><a href=\"#snippet-解析\" class=\"headerlink\" title=\"snippet 解析\"></a>snippet 解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">args:</span><br><span class=\"line\">  - rd::::upload</span><br></pre></td></tr></table></figure>\n\n<p>啟動參數的意義，這邊是 <code>rd::::upload</code>，這表示使用者帳號為rd，並且在家目錄底下建立一個 upload 的目錄(<code>/home/rd/upload</code>)，以便做存取，這樣我們就能夠將持久化硬碟掛載到 <code>/home/rd/upload</code> 路徑底下。</p>\n<blockquote>\n<p>使用者帳號可以自訂，不一定要使用rd</p>\n</blockquote>\n<p>可以看到 rd 的帳號並沒有設定密碼，在沒有設定密碼的情況下，表示認證會使用金鑰認證，那如果要使用密碼驗證可以這樣表示</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rd:12345:::upload</span><br></pre></td></tr></table></figure>\n\n<p>這樣表示密碼為 12345</p>\n<h2 id=\"暴露一個-External-LoadBalace\"><a href=\"#暴露一個-External-LoadBalace\" class=\"headerlink\" title=\"暴露一個 External LoadBalace\"></a>暴露一個 External LoadBalace</h2><p>暴露外部 LB 這樣可以讓本機去存取到 GKE 內的服務，但是白名單記得要設定，以提高安全性</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Service</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ftp-proxy</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  type: LoadBalancer</span><br><span class=\"line\">  loadBalancerIP: [填入自己的外網IP]</span><br><span class=\"line\">  loadBalancerSourceRanges:</span><br><span class=\"line\">  - [填入自己的白名單]</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">    - name: ssh</span><br><span class=\"line\">      port: 22</span><br><span class=\"line\">      protocol: TCP</span><br><span class=\"line\">      targetPort: 22</span><br><span class=\"line\">  selector:</span><br><span class=\"line\">    app: ftp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"snippet-解析-1\"><a href=\"#snippet-解析-1\" class=\"headerlink\" title=\"snippet 解析\"></a>snippet 解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">ports:</span><br><span class=\"line\">  - name: ssh</span><br><span class=\"line\">    port: 22</span><br><span class=\"line\">    protocol: TCP</span><br><span class=\"line\">    targetPort: 22</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p>其中這段 port 有沒有要改成其他非預設 22 port 都可以，以安全性角度來說可以做個修改，例如 <code>port: 14322</code>。 這樣連線時就使用 14322 做連線，GKE 就會自動做 port 的 mapping。</p>\n<h2 id=\"使用-FileZilla-測試\"><a href=\"#使用-FileZilla-測試\" class=\"headerlink\" title=\"使用 FileZilla 測試\"></a>使用 FileZilla 測試</h2><p>最後我們可以下載 FileZilla Client 來測試，如果剛才編寫 Deployment 的 YAML 時，啟動參數有設定密碼的話，就可以直接填入相關資訊做連線測試了。</p>\n<p>填入資訊</p>\n<ul>\n<li>主機: 填入External LoadBalance 的 IP</li>\n<li>使用者名稱: 填入啟動參數設定的使用者</li>\n<li>密碼: 填入啟動參數設定的密碼</li>\n<li>連接埠: 預設是22，如果剛剛在編寫 External LoadBalace 時，有修改 port，這邊記得要跟著變</li>\n</ul>\n<p>如果是使用金鑰驗證，我們要先設定好 private key 的位置，開啟 FileZilla Client，依照下圖點選到設定位置</p>\n<p>點選 編輯 &gt; 設定</p>\n<p><img src=\"0.png\"></p>\n<p>選擇 SFTP 並點選「加入金鑰檔案」，此時會請你選擇 private key 的位置</p>\n<p><img src=\"1.png\"></p>\n<p>這邊要注意一下，如果一開始產生金鑰時有設定 passphrase，會跳出此視窗，主要是因為他需要將 .key 轉成 .ppk，這邊直接點「是」</p>\n<p><img src=\"2.png\"></p>\n<p>輸入設定的 passphrase</p>\n<p><img src=\"3.png\"></p>\n<p>選擇鑰儲存 .ppk 的位置與命名</p>\n<p><img src=\"4.png\"></p>\n<p>最後再回到主畫面將連線資訊填入，密碼不用填寫，當連線後，會請你輸入 passphrase 的密碼</p>"}],"PostAsset":[{"_id":"source/_posts/在K8s使用FTP/0.png","slug":"0.png","post":"cko4j6su000036w1e9hp46lp6","modified":0,"renderable":0},{"_id":"source/_posts/在K8s使用FTP/1.png","slug":"1.png","post":"cko4j6su000036w1e9hp46lp6","modified":0,"renderable":0},{"_id":"source/_posts/在K8s使用FTP/2.png","slug":"2.png","post":"cko4j6su000036w1e9hp46lp6","modified":0,"renderable":0},{"_id":"source/_posts/在K8s使用FTP/3.png","slug":"3.png","post":"cko4j6su000036w1e9hp46lp6","modified":0,"renderable":0},{"_id":"source/_posts/在K8s使用FTP/4.png","slug":"4.png","post":"cko4j6su000036w1e9hp46lp6","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"cko4j6stw00016w1e7whb2mmn","tag_id":"cko4j6su100046w1ebcsp0ue8","_id":"cko4j6su400076w1eh58ohu2t"},{"post_id":"cko4j6su000036w1e9hp46lp6","tag_id":"cko4j6su400066w1e6hc45j8x","_id":"cko4j6su6000c6w1eggnacl9d"},{"post_id":"cko4j6su000036w1e9hp46lp6","tag_id":"cko4j6su400086w1efr07efl3","_id":"cko4j6su6000d6w1ebu6v7155"},{"post_id":"cko4j6su000036w1e9hp46lp6","tag_id":"cko4j6su500096w1e9j529fmv","_id":"cko4j6su6000e6w1ehey8bo03"},{"post_id":"cko4j6su000036w1e9hp46lp6","tag_id":"cko4j6su5000a6w1eh02z2ev3","_id":"cko4j6su6000f6w1e0ak3a1nj"},{"post_id":"cko4j6su000036w1e9hp46lp6","tag_id":"cko4j6su5000b6w1e3jze6qbt","_id":"cko4j6su6000g6w1ecex67yua"}],"Tag":[{"name":"PHP-FPM","_id":"cko4j6su100046w1ebcsp0ue8"},{"name":"GKE","_id":"cko4j6su400066w1e6hc45j8x"},{"name":"GCP","_id":"cko4j6su400086w1efr07efl3"},{"name":"K8s","_id":"cko4j6su500096w1e9j529fmv"},{"name":"kubernetes","_id":"cko4j6su5000a6w1eh02z2ev3"},{"name":"ftp","_id":"cko4j6su5000b6w1e3jze6qbt"}]}}